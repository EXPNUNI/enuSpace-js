function ChangePicture(a,b){var c;if(void 0==String(b))return void console.log("invaild pagename or undefined pagename");var d=String(b).split("\\");d.length>0&&(c=d[d.length-1]),GridentList=[],$("#imageLists").length>0&&$("#imageLists").empty(),requestpage(c)}function getPictureValue(page){var xmlHttp=new XMLHttpRequest,strUrl="getpicturevalue",strParam="page="+page;xmlHttp.onreadystatechange=function(){if(4==xmlHttp.readyState&&200==xmlHttp.status){var msg=xmlHttp.responseText,arr;if(""!=msg&&(arr=JSON.parse(msg)),void 0!=arr)if("RESULT_OK"==arr.RESULT_CODE){if(arr.TIME){arr.TIME_FORMAT!=prev_time_mode&&(time_flag=!0),old_time_value=time_value;var recive_time=new Date(arr.TIME).valueOf();if("SIM"==arr.TIME_FORMAT){var sub_time=new Date("1601-01-01 00:00:00.000").valueOf();time_value=recive_time-sub_time}else"SYS"==arr.TIME_FORMAT&&(time_value=recive_time);prev_time_mode=arr.TIME_FORMAT}var values=arr.VALUES,eval_text="";if(values.length>0)for(var i in values)if(-1!=values[i].VARIABLE.indexOf("@")&&(values[i].VARIABLE=values[i].VARIABLE.substring(1,values[i].VARIABLE.length)),void 0!=window[values[i].VARIABLE])"TRUE"==values[i].VALUE||"FALSE"==values[i].VALUE?"TRUE"==values[i].VALUE?window[values[i].VARIABLE]=Boolean(!0):"FALSE"==values[i].VALUE&&(window[values[i].VARIABLE]=Boolean(!1)):Number(values[i].VALUE)?window[values[i].VARIABLE]=Number(values[i].VALUE):window[values[i].VARIABLE]=values[i].VALUE;else if(-1!=values[i].VARIABLE.indexOf(".")){var split_text="";split_text=values[i].VARIABLE.split(".");for(var j in split_text)eval_text=0==j?'window["'+split_text[j]+'"]':eval_text+'["'+split_text[j]+'"]';"TRUE"==values[i].VALUE||"FALSE"==values[i].VALUE?"TRUE"==values[i].VALUE?eval_text=eval_text+" = "+Boolean(!0)+";":"FALSE"==values[i].VALUE&&(eval_text=eval_text+" = "+Boolean(!1)+";"):eval_text=Number(values[i].VALUE)?eval_text+" = "+Number(values[i].VALUE)+";":eval_text+" = "+values[i].VALUE+";",eval(eval_text)}}else"CODE_INVALID_PAGE"==arr.RESULT_CODE&&console.log("getPictureValue: 페이지를 찾지 못하였습니다.");if(old_time_value!=time_value&&0!=window[root_obj_id].trend_list.length){var trendlist=window[root_obj_id].trend_list;for(var i in trendlist)SeriesDataUpdate(trendlist[i])}if(time_flag){if(0!=window[root_obj_id].trend_list.length){var trendlist=window[root_obj_id].trend_list;for(var i in trendlist)SeriesDataInitialize(trendlist[i])}time_flag=!1}}else 4==xmlHttp.readyState&&500==xmlHttp.status?console.log("500 error Internal Server Error: 서버에서 클라이언트 요청을 처리 중에 에러가 발생함."):4==xmlHttp.readyState&&503==xmlHttp.status?console.log("503 error Service Unavailable: 서버가 일시적으로 요청을 처리할 수 없음. 서버가 과부하 상태이거나 점검중이므로 요청을 처리할 수 없음을 알려줌."):4==xmlHttp.readyState&&504==xmlHttp.status?console.log("504 error Gateway Timeout: 서버를 통하는 게이트웨이에 문제가 발생하여 시간이 초과됨."):4==xmlHttp.readyState&&505==xmlHttp.status&&console.log("505 error HTTP Version Not Supported: 해당 HTTP 버전에서는 지원되지 않는 요청임을 알려줌.")},xmlHttp.open("POST",strUrl,!0),xmlHttp.setRequestHeader("Content-Type","application/x-www-form-urlencoded;charset=UTF-8"),xmlHttp.setRequestHeader("Cache-Control","no-cache, must-revalidate"),xmlHttp.setRequestHeader("Pragma","no-cache"),xmlHttp.send(strParam)}function requestpage(a){void 0!=root_obj_id&&void 0!=window[root_obj_id]&&(void 0!=window[root_obj_id].main_taskview&&clearInterval(interval_id),delete window[root_obj_id]),void 0!=current_page&&void 0!=interval_page_value&&clearInterval(interval_page_value);var b=new XMLHttpRequest,d="page="+a.trim();current_page=a.trim(),b.open("POST","requestpage",!1),b.setRequestHeader("Content-Type","application/x-www-form-urlencoded;charset=UTF-8"),b.setRequestHeader("Cache-Control","no-cache, must-revalidate"),b.setRequestHeader("Pragma","no-cache"),b.send(d);var g,e=navigator.userAgent.toLowerCase(),f=b.responseText;"Netscape"==navigator.appName&&-1!=navigator.userAgent.search("Trident")||-1!=e.indexOf("msie")?(g=new ActiveXObject("Microsoft.XMLDOM"),g.async=!1,g.loadXML(f),current_browser="ie"):window.DOMParser&&(parser=new DOMParser,g=parser.parseFromString(f,"text/xml"),current_browser=""),makestruct(g.documentElement),void 0!=root_obj_id&&void 0!=window[root_obj_id]&&void 0!=window[root_obj_id].main_taskview&&(interval_id=setInterval("window[root_obj_id].main_taskview()",50)),mouse_over_obj=window[root_obj_id],void 0!=current_page&&(interval_page_value=setInterval("getPictureValue(current_page);",200)),Draw_Init(window[root_obj_id]),Draw_All(window[root_obj_id])}function SetTagValue(a,b){var c=new XMLHttpRequest,e="tagid="+a+"&value="+b;c.onreadystatechange=function(){if(4==c.readyState&&200==c.status){var a=c.responseText,b=JSON.parse(a);"OK"==b.RESULT||("CODE_VARIABLE_NOUT_FOUND"==b.RESULT_CODE&&console.log("SetTagValue: 등록된 디바이스의 변수를  검색하지 못하였습니다."),"CODE_UNKNOWN_DATATYPE"==b.RESULT_CODE&&console.log("SetTagValue:알수없는 데이터 타입니다.."))}},c.open("POST","setvalue",!0),c.setRequestHeader("Content-Type","application/x-www-form-urlencoded;charset=UTF-8"),c.setRequestHeader("Cache-Control","no-cache, must-revalidate"),c.setRequestHeader("Pragma","no-cache"),c.send(e)}function GetTagValue(a){var b=new XMLHttpRequest,d="tagid="+a;b.open("POST","getvalue",!1),b.setRequestHeader("Content-Type","application/x-www-form-urlencoded;charset=UTF-8"),b.setRequestHeader("Cache-Control","no-cache, must-revalidate"),b.setRequestHeader("Pragma","no-cache"),b.send(d);var e=b.responseText,f=JSON.parse(e);if("OK"==f.RESULT){return"wchar"==f.TYPE?f.VALUE:"bool"==f.TYPE?"true"==f.VALUE:Number(f.VALUE)}"CODE_VARIABLE_NOUT_FOUND"==f.RESULT_CODE&&console.log("GetTagValue: 등록된 디바이스의 변수를  검색하지 못하였습니다."),"CODE_UNKNOWN_DATATYPE"==f.RESULT_CODE&&console.log("GetTagValue: 알수없는 데이터 타입니다..")}function sibling_update(a){var b;if(void 0!=a)for(var d=0;d<a.childNodes.length;d++)d-1==-1?b=a.childNodes[d]:(b.nextSibling=a.childNodes[d],a.childNodes[d].prevSibling=b,b=a.childNodes[d])}function makestruct(a,b){if(a){"svg"==a.nodeName&&(window[a.id]=new CreateSvgObj(a),root_obj_id=a.id,b=window[a.id]);var c=a.firstChild;if(0!=c)for(var d=0;d<a.childNodes.length;d++){if("line"==c.nodeName?(window[c.id]=new CreateLineObj(c),window[c.id].parentObj=b,b.appendChild(window[c.id])):"rect"==c.nodeName?(window[c.id]=new CreateRectObj(c),window[c.id].parentObj=b,b.appendChild(window[c.id])):"polygon"==c.nodeName||"polyline"==c.nodeName?(window[c.id]=new CreatePolygonObj(c),window[c.id].parentObj=b,b.appendChild(window[c.id])):"ellipse"==c.nodeName?(window[c.id]=new CreateEllipseObj(c),window[c.id].parentObj=b,b.appendChild(window[c.id])):"circle"==c.nodeName?(window[c.id]=new CreateCircleObj(c),window[c.id].parentObj=b,b.appendChild(window[c.id])):"path"==c.nodeName?(window[c.id]=new CreatePathObj(c),window[c.id].parentObj=b,b.appendChild(window[c.id])):"text"==c.nodeName?(window[c.id]=new CreateTextObj(c),window[c.id].parentObj=b,b.appendChild(window[c.id])):"g"==c.nodeName?(window[c.id]=new CreateGObj(c),window[c.id].parentObj=b,b.appendChild(window[c.id])):"use"==c.nodeName?(window[c.id]=new CreateUseObj(c),window[c.id].parentObj=b,b.appendChild(window[c.id])):"image"==c.nodeName?(window[c.id]=new CreateImageObj(c),window[c.id].parentObj=b,b.appendChild(window[c.id])):"pg-trend"==c.nodeName?(window[c.id]=new CreateTrendObj(c),window[c.id].parentObj=b,b.appendChild(window[c.id]),window[root_obj_id].trend_list.push(window[c.id])):"pg-link"==c.nodeName?(window[c.id]=new CreateLinkObj(c),window[c.id].parentObj=b,b.appendChild(window[c.id])):"linearGradient"==c.nodeName?(window[c.id]=new CreateLineGridentObj(c),window[c.id].parentObj=b,GridentList.push(window[c.id])):"radialGradient"==c.nodeName?(window[c.id]=new CreateRadialGridentObj(c),window[c.id].parentObj=b,GridentList.push(window[c.id])):"pg-attribute"==c.nodeName&&("svg"==a.nodeName?"double"==c.getAttribute("type")||"int"==c.getAttribute("type")||"float"==c.getAttribute("type")?window[c.getAttribute("variable")]=Number(c.getAttribute("initial")):"bool"==c.getAttribute("type")?"TRUE"==c.getAttribute("initial")?window[c.getAttribute("variable")]=Boolean(!0):window[c.getAttribute("variable")]=Boolean(!1):window[c.getAttribute("variable")]=c.getAttribute("initial"):"double"==c.getAttribute("type")||"int"==c.getAttribute("type")||"float"==c.getAttribute("type")?b[c.getAttribute("variable")]=Number(c.getAttribute("initial")):"bool"==c.getAttribute("type")?"TRUE"==c.getAttribute("initial")?b[c.getAttribute("variable")]=Boolean(!0):b[c.getAttribute("variable")]=Boolean(!1):b[c.getAttribute("variable")]=c.getAttribute("initial")),0!=c.childNodes.length&&"use"!=c.nodeName&&makestruct(c,window[c.id]),!c.nextSibling){sibling_update(b);break}c=c.nextSibling}}}function CreateFunction(scriptobj,createobj){for(var scripttext=scriptobj.split("function"),trimtext,scriptcontent,userfn_name,paramiter_arr,innerfncheck,paramitertext,i=0;i<scripttext.length;i++)trimtext=scripttext[i].trim(),scriptcontent=trimtext.substring(trimtext.indexOf("{")+1,trimtext.length-1),innerfncheck=scriptcontent.split("{").length!=scriptcontent.split("}").length,trimtext&&(1!=trimtext.indexOf("onclick()")||innerfncheck?1!=trimtext.indexOf("onmousedown()")||innerfncheck?1!=trimtext.indexOf("onmouseup()")||innerfncheck?1!=trimtext.indexOf("onmouseover()")||innerfncheck?1!=trimtext.indexOf("onmouseout()")||innerfncheck?1!=trimtext.indexOf("onmousemove()")||innerfncheck?1!=trimtext.indexOf("onmousewheel()")||innerfncheck?1!=trimtext.indexOf("onfocusin()")||innerfncheck?1!=trimtext.indexOf("onfocusout()")||innerfncheck?1!=trimtext.indexOf("onactivate()")||innerfncheck?1!=trimtext.indexOf("onload()")||innerfncheck?1!=trimtext.indexOf("ontaskview()")||innerfncheck?"svg"==createobj.nodename?(userfn_name=trimtext.substring(0,trimtext.indexOf("(")).trim(),""==userfn_name?console.log("id: "+createobj.id+" error: fn name is null"):"main_taskview"==userfn_name?createobj[userfn_name]=Function(scriptcontent.trim()):(paramitertext=trimtext.substring(trimtext.indexOf("(")+1,trimtext.indexOf(")")).trim(),paramitertext='"'+paramitertext+'"',window[userfn_name]=Function(eval(paramitertext),scriptcontent.trim()))):(userfn_name=trimtext.substring(0,trimtext.indexOf("(")).trim(),""==userfn_name?console.log("id: "+createobj.id+" error: fn name is null"):(paramitertext=trimtext.substring(trimtext.indexOf("(")+1,trimtext.indexOf(")")).trim(),paramitertext='"'+paramitertext+'"',createobj[userfn_name]=Function(eval(paramitertext),scriptcontent.trim()))):createobj._ontaskview=Function(scriptcontent.trim()):createobj._onload=Function(scriptcontent.trim()):createobj._onactivate=Function(scriptcontent.trim()):createobj._onfocusout=Function(scriptcontent.trim()):createobj._onfocusin=Function(scriptcontent.trim()):createobj._onmousewheel=Function(scriptcontent.trim()):createobj._onmousemove=Function(scriptcontent.trim()):createobj._onmouseout=Function(scriptcontent.trim()):createobj._onmouseover=Function(scriptcontent.trim()):createobj._onmouseup=Function(scriptcontent.trim()):createobj._onmousedown=Function(scriptcontent.trim()):createobj._onclick=Function(scriptcontent.trim()))}function CreateLinkObj(a){this.nodename=a.nodeName,this.id=a.getAttribute("id"),this.parentObj,this.ownnode=a.cloneNode(!1),this.childNodes=[],this.from_id=a.getAttribute("from-id"),this.param_from=a.getAttribute("param-from"),this.from_value,this.to_id=a.getAttribute("to-id"),this.param_to=a.getAttribute("param-to")}function CreateSvgObj(a){if(this.nodename=a.nodeName,this.xmlns=a.getAttribute("xmlns"),this.xlink=a.getAttribute("xmlns:xlink"),this.id=a.getAttribute("id"),this.prevSibling,this.nextSibling,this.parentObj,this.parentNode,this.ownnode=a.cloneNode(!1),this.childNodes=[],this.appendChild=function(a){this.childNodes.push(a),sibling_update(this)},this.removeChild=function(a){for(var b=0;b<childNodes.length;b++)if(childNodes[b].id==a){this.childNodes.splice(b,1);break}sibling_update(this)},this.trend_list=[],this.visibility=a.getAttribute("visibility"),this.stroke="rgb(255,255,255)",this.stroke_opacity=1,this.stroke_width=1,this.stroke_dasharray="",this.fill="rgb(255,255,255)",this.fill_opacity=1,this.style=String(a.getAttribute("style")),"null"!=this.style)for(var c,b=this.style.split(";"),d=0;d<b.length;d++)c=b[d].split(":"),"stroke"==c[0]&&(this.stroke=String(c[1])),"stroke-opacity"==c[0]&&(this.stroke_opacity=String(c[1])),"stroke-width"==c[0]&&(this.stroke_width=String(c[1])),"stroke-dasharray"==c[0]&&(this.stroke_dasharray=String(c[1])),"background-color"==c[0]&&(this.fill=String(c[1]),this.fill_opacity=1);if(this.x=parseFloat(a.getAttribute("x")),this.y=parseFloat(a.getAttribute("y")),this.width=parseFloat(a.getAttribute("width")),this.height=parseFloat(a.getAttribute("height")),this.transform=a.getAttribute("transform"),this.transform){var e=this.transform.split("(");this.translate_x=parseFloat(Number(e[1].substring(0,e[1].indexOf(",")))),this.translate_y=parseFloat(Number(e[1].substring(e[1].indexOf(",")+1,e[1].indexOf(")")))),this.rotate=parseFloat(Number(e[2].substring(0,e[2].indexOf(")")))),this.scale_x=parseFloat(Number(e[3].substring(0,e[3].indexOf(",")))),this.scale_y=parseFloat(Number(e[3].substring(e[3].indexOf(",")+1,e[3].indexOf(")")))),this.center_x=parseFloat(Number(a.getAttribute("pg-xcenter"))),this.center_y=parseFloat(Number(a.getAttribute("pg-ycenter")))}else this.translate_x=0,this.translate_y=0,this.rotate=0,this.scale_x=1,this.scale_y=1,this.center_x=0,this.center_y=0;this.version=a.getAttribute("version"),this.preserveAspectRatio=a.getAttribute("preserveAspectRatio"),this.contentScriptType=a.getAttribute("contentScriptType"),this.contentStyleType=a.getAttribute("contentStyleType"),this.viewBox=a.getAttribute("viewBox");for(var f=a.firstChild,d=0;d<a.childNodes.length&&("script"==f.nodeName&&("ie"==current_browser?CreateFunction(f.text,this):CreateFunction(f.textContent,this)),f.nextSibling);d++)f=f.nextSibling}function CreateGObj(a){if(this.nodename=a.nodeName,this.xmlns=a.getAttribute("xmlns"),this.xlink=a.getAttribute("xmlns:xlink"),this.id=a.getAttribute("id"),this.prevSibling,this.nextSibling,this.parentObj,this.parentNode,this.ownnode=a.cloneNode(!1),this.childNodes=[],this.appendChild=function(a){this.childNodes.push(a),sibling_update(this)},this.removeChild=function(a){for(var b=0;b<childNodes.length;b++)if(childNodes[b].id==a){this.childNodes.splice(b,1);break}sibling_update(this)},this.visibility=a.getAttribute("visibility"),this.stroke=a.getAttribute("stroke"),this.stroke_opacity=parseFloat(a.getAttribute("stroke-opacity")),this.stroke_width=parseFloat(a.getAttribute("stroke-width")),this.stroke_dasharray=a.getAttribute("stroke-dasharray"),this.x=parseFloat(a.getAttribute("x")),this.y=parseFloat(a.getAttribute("y")),this.width=parseFloat(a.getAttribute("width")),this.height=parseFloat(a.getAttribute("height")),this.style=a.getAttribute("style"),this.transform=a.getAttribute("transform"),this.transform){var b=this.transform.split("(");this.translate_x=parseFloat(Number(b[1].substring(0,b[1].indexOf(",")))),this.translate_y=parseFloat(Number(b[1].substring(b[1].indexOf(",")+1,b[1].indexOf(")")))),this.rotate=parseFloat(Number(b[2].substring(0,b[2].indexOf(")")))),this.scale_x=parseFloat(Number(b[3].substring(0,b[3].indexOf(",")))),this.scale_y=parseFloat(Number(b[3].substring(b[3].indexOf(",")+1,b[3].indexOf(")")))),this.center_x=parseFloat(Number(a.getAttribute("pg-xcenter"))),this.center_y=parseFloat(Number(a.getAttribute("pg-ycenter")))}else this.translate_x=0,this.translate_y=0,this.rotate=0,this.scale_x=1,this.scale_y=1,this.center_x=0,this.center_y=0;for(var c=a.firstChild,d=0;d<a.childNodes.length&&("script"==c.nodeName&&("ie"==current_browser?CreateFunction(c.text,this):CreateFunction(c.textContent,this)),c.nextSibling);d++)c=c.nextSibling}function CreateLineObj(a){if(this.nodename=a.nodeName,this.xmlns=a.getAttribute("xmlns"),this.xlink=a.getAttribute("xmlns:xlink"),this.id=a.getAttribute("id"),this.prevSibling,this.nextSibling,this.parentObj,this.parentNode,this.ownnode=a.cloneNode(!1),this.childNodes=[],this.appendChild=function(a){this.childNodes.push(a),sibling_update(this)},this.removeChild=function(a){for(var b=0;b<childNodes.length;b++)if(childNodes[b].id==a){this.childNodes.splice(b,1);break}sibling_update(this)},this.visibility=a.getAttribute("visibility"),this.stroke=a.getAttribute("stroke"),this.stroke_opacity=parseFloat(a.getAttribute("stroke-opacity")),this.stroke_width=parseFloat(a.getAttribute("stroke-width")),this.stroke_dasharray=a.getAttribute("stroke-dasharray"),this.stroke_linecap=a.getAttribute("stroke-linecap"),this.stroke_linejoin=a.getAttribute("stroke-linejoin"),this.x=parseFloat(a.getAttribute("x")),this.y=parseFloat(a.getAttribute("y")),this.width=parseFloat(a.getAttribute("width")),this.height=parseFloat(a.getAttribute("height")),this.style=a.getAttribute("style"),this.transform=a.getAttribute("transform"),this.transform){var b=this.transform.split("(");this.translate_x=parseFloat(Number(b[1].substring(0,b[1].indexOf(",")))),this.translate_y=parseFloat(Number(b[1].substring(b[1].indexOf(",")+1,b[1].indexOf(")")))),this.rotate=parseFloat(Number(b[2].substring(0,b[2].indexOf(")")))),this.scale_x=parseFloat(Number(b[3].substring(0,b[3].indexOf(",")))),this.scale_y=parseFloat(Number(b[3].substring(b[3].indexOf(",")+1,b[3].indexOf(")")))),this.center_x=parseFloat(Number(a.getAttribute("pg-xcenter"))),this.center_y=parseFloat(Number(a.getAttribute("pg-ycenter")))}else this.translate_x=0,this.translate_y=0,this.rotate=0,this.scale_x=1,this.scale_y=1,this.center_x=0,this.center_y=0;this.fill=a.getAttribute("stroke"),this.fill_opacity=parseFloat(a.getAttribute("stroke-opacity")),this.x1=parseFloat(Number(a.getAttribute("x1"))),this.y1=parseFloat(Number(a.getAttribute("y1"))),this.x2=parseFloat(Number(a.getAttribute("x2"))),this.y2=parseFloat(Number(a.getAttribute("y2"))),this.begin_arrow_type=a.getAttribute("pg-begin-arrow-type"),this.begin_arrow_size=parseFloat(Number(a.getAttribute("pg-begin-arrow-size"))),this.begin_arrow_span=a.getAttribute("pg-begin-arrow-span"),this.end_arrow_type=a.getAttribute("pg-end-arrow-type"),this.end_arrow_size=parseFloat(Number(a.getAttribute("pg-end-arrow-size"))),this.end_arrow_span=a.getAttribute("pg-end-arrow-span");for(var c=a.firstChild,d=0;d<a.childNodes.length&&("script"==c.nodeName&&("ie"==current_browser?CreateFunction(c.text,this):CreateFunction(c.textContent,this)),c.nextSibling);d++)c=c.nextSibling}function CreateRectObj(a){if(this.nodename=a.nodeName,this.xmlns=a.getAttribute("xmlns"),this.xlink=a.getAttribute("xmlns:xlink"),this.id=a.getAttribute("id"),this.prevSibling,this.nextSibling,this.parentObj,this.parentNode,this.ownnode=a.cloneNode(!1),this.childNodes=[],this.appendChild=function(a){this.childNodes.push(a),sibling_update(this)},this.removeChild=function(a){for(var b=0;b<childNodes.length;b++)if(childNodes[b].id==a){this.childNodes.splice(b,1);break}sibling_update(this)},this.visibility=a.getAttribute("visibility"),this.stroke=a.getAttribute("stroke"),this.stroke_opacity=parseFloat(a.getAttribute("stroke-opacity")),this.stroke_width=parseFloat(a.getAttribute("stroke-width")),this.stroke_dasharray=a.getAttribute("stroke-dasharray"),this.stroke_linecap=a.getAttribute("stroke-linecap"),this.stroke_linejoin=a.getAttribute("stroke-linejoin"),this.x=parseFloat(a.getAttribute("x")),this.y=parseFloat(a.getAttribute("y")),this.width=parseFloat(a.getAttribute("width")),this.height=parseFloat(a.getAttribute("height")),this.style=a.getAttribute("style"),this.transform=a.getAttribute("transform"),this.transform){var b=this.transform.split("(");this.translate_x=parseFloat(Number(b[1].substring(0,b[1].indexOf(",")))),this.translate_y=parseFloat(Number(b[1].substring(b[1].indexOf(",")+1,b[1].indexOf(")")))),this.rotate=parseFloat(Number(b[2].substring(0,b[2].indexOf(")")))),this.scale_x=parseFloat(Number(b[3].substring(0,b[3].indexOf(",")))),this.scale_y=parseFloat(Number(b[3].substring(b[3].indexOf(",")+1,b[3].indexOf(")")))),this.center_x=parseFloat(Number(a.getAttribute("pg-xcenter"))),this.center_y=parseFloat(Number(a.getAttribute("pg-ycenter")))}else this.translate_x=0,this.translate_y=0,this.rotate=0,this.scale_x=1,this.scale_y=1,this.center_x=0,this.center_y=0;this.fill=a.getAttribute("fill"),this.fill_opacity=parseFloat(a.getAttribute("fill-opacity")),this.rx=parseFloat(a.getAttribute("rx")),this.ry=parseFloat(a.getAttribute("ry"));for(var c=a.firstChild,d=0;d<a.childNodes.length&&("script"==c.nodeName&&("ie"==current_browser?CreateFunction(c.text,this):CreateFunction(c.textContent,this)),c.nextSibling);d++)c=c.nextSibling}function CreatePolygonObj(a){if(this.nodename=a.nodeName,this.xmlns=a.getAttribute("xmlns"),this.xlink=a.getAttribute("xmlns:xlink"),this.id=a.getAttribute("id"),this.prevSibling,this.nextSibling,this.parentObj,this.parentNode,this.ownnode=a.cloneNode(!1),this.childNodes=[],this.appendChild=function(a){this.childNodes.push(a),sibling_update(this)},this.removeChild=function(a){for(var b=0;b<childNodes.length;b++)if(childNodes[b].id==a){this.childNodes.splice(b,1);break}sibling_update(this)},this.visibility=a.getAttribute("visibility"),this.stroke=a.getAttribute("stroke"),this.stroke_opacity=parseFloat(a.getAttribute("stroke-opacity")),this.stroke_width=parseFloat(a.getAttribute("stroke-width")),this.stroke_dasharray=a.getAttribute("stroke-dasharray"),this.stroke_linecap=a.getAttribute("stroke-linecap"),this.stroke_linejoin=a.getAttribute("stroke-linejoin"),this.x=parseFloat(a.getAttribute("x")),this.y=parseFloat(a.getAttribute("y")),this.width=parseFloat(a.getAttribute("width")),this.height=parseFloat(a.getAttribute("height")),this.style=a.getAttribute("style"),this.transform=a.getAttribute("transform"),this.transform){var b=this.transform.split("(");this.translate_x=parseFloat(Number(b[1].substring(0,b[1].indexOf(",")))),this.translate_y=parseFloat(Number(b[1].substring(b[1].indexOf(",")+1,b[1].indexOf(")")))),this.rotate=parseFloat(Number(b[2].substring(0,b[2].indexOf(")")))),this.scale_x=parseFloat(Number(b[3].substring(0,b[3].indexOf(",")))),this.scale_y=parseFloat(Number(b[3].substring(b[3].indexOf(",")+1,b[3].indexOf(")")))),this.center_x=parseFloat(Number(a.getAttribute("pg-xcenter"))),this.center_y=parseFloat(Number(a.getAttribute("pg-ycenter")))}else this.translate_x=0,this.translate_y=0,this.rotate=0,this.scale_x=1,this.scale_y=1,this.center_x=0,this.center_y=0;"polyline"==a.nodeName?(this.fill=a.getAttribute("stroke"),this.fill_opacity=parseFloat(a.getAttribute("stroke-opacity")),this.begin_arrow_type=a.getAttribute("pg-begin-arrow-type"),this.begin_arrow_size=parseFloat(a.getAttribute("pg-begin-arrow-size")),this.begin_arrow_span=a.getAttribute("pg-begin-arrow-span"),this.end_arrow_type=a.getAttribute("pg-end-arrow-type"),this.end_arrow_size=parseFloat(a.getAttribute("pg-end-arrow-size")),this.end_arrow_span=a.getAttribute("pg-end-arrow-span")):(this.fill=a.getAttribute("fill"),this.fill_opacity=parseFloat(a.getAttribute("fill-opacity"))),this.points=a.getAttribute("points");for(var c=a.firstChild,d=0;d<a.childNodes.length&&("script"==c.nodeName&&("ie"==current_browser?CreateFunction(c.text,this):CreateFunction(c.textContent,this)),c.nextSibling);d++)c=c.nextSibling}function CreateEllipseObj(a){if(this.nodename=a.nodeName,this.xmlns=a.getAttribute("xmlns"),this.xlink=a.getAttribute("xmlns:xlink"),this.id=a.getAttribute("id"),this.prevSibling,this.nextSibling,this.parentObj,this.parentNode,this.ownnode=a.cloneNode(!1),this.childNodes=[],this.appendChild=function(a){this.childNodes.push(a),sibling_update(this)},this.removeChild=function(a){for(var b=0;b<childNodes.length;b++)if(childNodes[b].id==a){this.childNodes.splice(b,1);break}sibling_update(this)},this.visibility=a.getAttribute("visibility"),this.stroke=a.getAttribute("stroke"),this.stroke_opacity=parseFloat(a.getAttribute("stroke-opacity")),this.stroke_width=parseFloat(a.getAttribute("stroke-width")),this.stroke_dasharray=a.getAttribute("stroke-dasharray"),this.stroke_linecap=a.getAttribute("stroke-linecap"),this.stroke_linejoin=a.getAttribute("stroke-linejoin"),this.x=parseFloat(a.getAttribute("x")),this.y=parseFloat(a.getAttribute("y")),this.width=parseFloat(a.getAttribute("width")),this.height=parseFloat(a.getAttribute("height")),this.style=a.getAttribute("style"),this.transform=a.getAttribute("transform"),this.transform){var b=this.transform.split("(");this.translate_x=parseFloat(Number(b[1].substring(0,b[1].indexOf(",")))),this.translate_y=parseFloat(Number(b[1].substring(b[1].indexOf(",")+1,b[1].indexOf(")")))),this.rotate=parseFloat(Number(b[2].substring(0,b[2].indexOf(")")))),this.scale_x=parseFloat(Number(b[3].substring(0,b[3].indexOf(",")))),this.scale_y=parseFloat(Number(b[3].substring(b[3].indexOf(",")+1,b[3].indexOf(")")))),this.center_x=parseFloat(Number(a.getAttribute("pg-xcenter"))),this.center_y=parseFloat(Number(a.getAttribute("pg-ycenter")))}else this.translate_x=0,this.translate_y=0,this.rotate=0,this.scale_x=1,this.scale_y=1,this.center_x=0,this.center_y=0;this.fill=a.getAttribute("fill"),this.fill_opacity=parseFloat(a.getAttribute("fill-opacity")),this.cx=parseFloat(a.getAttribute("cx")),this.cy=parseFloat(a.getAttribute("cy")),this.rx=parseFloat(a.getAttribute("rx")),this.ry=parseFloat(a.getAttribute("ry"));for(var c=a.firstChild,d=0;d<a.childNodes.length&&("script"==c.nodeName&&("ie"==current_browser?CreateFunction(c.text,this):CreateFunction(c.textContent,this)),c.nextSibling);d++)c=c.nextSibling}function CreateCircleObj(a){if(this.nodename=a.nodeName,this.xmlns=a.getAttribute("xmlns"),this.xlink=a.getAttribute("xmlns:xlink"),this.id=a.getAttribute("id"),this.prevSibling,this.nextSibling,this.parentObj,this.parentNode,this.ownnode=a.cloneNode(!1),this.childNodes=[],this.appendChild=function(a){this.childNodes.push(a),sibling_update(this)},this.removeChild=function(a){for(var b=0;b<childNodes.length;b++)if(childNodes[b].id==a){this.childNodes.splice(b,1);break}sibling_update(this)},this.visibility=a.getAttribute("visibility"),this.stroke=a.getAttribute("stroke"),this.stroke_opacity=parseFloat(a.getAttribute("stroke-opacity")),this.stroke_width=parseFloat(a.getAttribute("stroke-width")),this.stroke_dasharray=a.getAttribute("stroke-dasharray"),this.stroke_linecap=a.getAttribute("stroke-linecap"),this.stroke_linejoin=a.getAttribute("stroke-linejoin"),this.x=parseFloat(a.getAttribute("x")),this.y=parseFloat(a.getAttribute("y")),this.width=parseFloat(a.getAttribute("width")),this.height=parseFloat(a.getAttribute("height")),this.style=a.getAttribute("style"),this.transform=a.getAttribute("transform"),this.transform){var b=this.transform.split("(");this.translate_x=parseFloat(Number(b[1].substring(0,b[1].indexOf(",")))),this.translate_y=parseFloat(Number(b[1].substring(b[1].indexOf(",")+1,b[1].indexOf(")")))),this.rotate=parseFloat(Number(b[2].substring(0,b[2].indexOf(")")))),this.scale_x=parseFloat(Number(b[3].substring(0,b[3].indexOf(",")))),this.scale_y=parseFloat(Number(b[3].substring(b[3].indexOf(",")+1,b[3].indexOf(")")))),this.center_x=parseFloat(Number(a.getAttribute("pg-xcenter"))),this.center_y=parseFloat(Number(a.getAttribute("pg-ycenter")))}else this.translate_x=0,this.translate_y=0,this.rotate=0,this.scale_x=1,this.scale_y=1,this.center_x=0,this.center_y=0;this.fill=a.getAttribute("fill"),this.fill_opacity=parseFloat(a.getAttribute("fill-opacity")),this.cx=parseFloat(a.getAttribute("cx")),this.cy=parseFloat(a.getAttribute("cy")),this.r=parseFloat(a.getAttribute("r"));for(var c=a.firstChild,d=0;d<a.childNodes.length&&("script"==c.nodeName&&("ie"==current_browser?CreateFunction(c.text,this):CreateFunction(c.textContent,this)),c.nextSibling);d++)c=c.nextSibling}function compressSpaces(a){return a.replace(/[\s\r\t\n]+/gm," ")}function trim(a){return a.replace(/^\s+|\s+$/g,"")}function CreatePathObj(a){if(this.nodename=a.nodeName,this.xmlns=a.getAttribute("xmlns"),this.xlink=a.getAttribute("xmlns:xlink"),this.id=a.getAttribute("id"),this.prevSibling,this.nextSibling,this.parentObj,this.parentNode,this.ownnode=a.cloneNode(!1),this.childNodes=[],this.appendChild=function(a){this.childNodes.push(a),sibling_update(this)},this.removeChild=function(a){for(var b=0;b<childNodes.length;b++)if(childNodes[b].id==a){this.childNodes.splice(b,1);break}sibling_update(this)},this.visibility=a.getAttribute("visibility"),this.stroke=a.getAttribute("stroke"),this.stroke_opacity=parseFloat(a.getAttribute("stroke-opacity")),this.stroke_width=parseFloat(a.getAttribute("stroke-width")),this.stroke_dasharray=a.getAttribute("stroke-dasharray"),this.stroke_linecap=a.getAttribute("stroke-linecap"),this.stroke_linejoin=a.getAttribute("stroke-linejoin"),this.x=parseFloat(a.getAttribute("x")),this.y=parseFloat(a.getAttribute("y")),this.width=parseFloat(a.getAttribute("width")),this.height=parseFloat(a.getAttribute("height")),this.style=a.getAttribute("style"),this.transform=a.getAttribute("transform"),this.transform){var b=this.transform.split("(");this.translate_x=parseFloat(Number(b[1].substring(0,b[1].indexOf(",")))),this.translate_y=parseFloat(Number(b[1].substring(b[1].indexOf(",")+1,b[1].indexOf(")")))),this.rotate=parseFloat(Number(b[2].substring(0,b[2].indexOf(")")))),this.scale_x=parseFloat(Number(b[3].substring(0,b[3].indexOf(",")))),this.scale_y=parseFloat(Number(b[3].substring(b[3].indexOf(",")+1,b[3].indexOf(")")))),this.center_x=parseFloat(Number(a.getAttribute("pg-xcenter"))),this.center_y=parseFloat(Number(a.getAttribute("pg-ycenter")))}else this.translate_x=0,this.translate_y=0,this.rotate=0,this.scale_x=1,this.scale_y=1,this.center_x=0,this.center_y=0;this.fill=a.getAttribute("fill"),this.fill_opacity=parseFloat(a.getAttribute("fill-opacity")),this.data_type=a.getAttribute("data-type"),this.d=a.getAttribute("d"),this.mask="",this.d_array=[],this.d_array=this.d.split(" "),this.pathLength=this.d_array.length,this.d=this.d.replace(/,/gm," "),this.d=this.d.replace(/([MmZzLlHhVvCcSsQqTtAa])([MmZzLlHhVvCcSsQqTtAa])/gm,"$1 $2"),this.d=this.d.replace(/([MmZzLlHhVvCcSsQqTtAa])([MmZzLlHhVvCcSsQqTtAa])/gm,"$1 $2"),this.d=this.d.replace(/([MmZzLlHhVvCcSsQqTtAa])([^\s])/gm,"$1 $2"),this.d=this.d.replace(/([^\s])([MmZzLlHhVvCcSsQqTtAa])/gm,"$1 $2"),this.d=this.d.replace(/([0-9])([+\-])/gm,"$1 $2"),this.d=this.d.replace(/(\.[0-9]*)(\.)/gm,"$1 $2"),this.d=this.d.replace(/([Aa](\s+[0-9]+){3})\s+([01])\s*([01])/gm,"$1 $3 $4 "),this.d=this.d.replace(/[\s\r\t\n]+/gm," "),this.d=this.d.replace(/^\s+|\s+$/g,"");for(var c=a.firstChild,d=0;d<a.childNodes.length&&("script"==c.nodeName&&("ie"==current_browser?CreateFunction(c.text,this):CreateFunction(c.textContent,this)),c.nextSibling);d++)c=c.nextSibling}function CreateTextObj(a){if(this.nodename=a.nodeName,this.xmlns=a.getAttribute("xmlns"),this.xlink=a.getAttribute("xmlns:xlink"),this.id=a.getAttribute("id"),this.prevSibling,this.nextSibling,this.parentObj,this.parentNode,this.ownnode=a.cloneNode(!1),this.childNodes=[],this.appendChild=function(a){this.childNodes.push(a),sibling_update(this)},this.removeChild=function(a){for(var b=0;b<childNodes.length;b++)if(childNodes[b].id==a){this.childNodes.splice(b,1);break}sibling_update(this)},this.visibility=a.getAttribute("visibility"),this.stroke=a.getAttribute("stroke"),this.stroke_opacity=parseFloat(a.getAttribute("stroke-opacity")),this.stroke_width=parseFloat(a.getAttribute("stroke-width")),this.stroke_dasharray=a.getAttribute("stroke-dasharray"),this.stroke_linecap=a.getAttribute("stroke-linecap"),this.stroke_linejoin=a.getAttribute("stroke-linejoin"),this.x=parseFloat(a.getAttribute("x")),this.y=parseFloat(a.getAttribute("y")),this.width=parseFloat(a.getAttribute("width")),this.height=parseFloat(a.getAttribute("height")),this.style=a.getAttribute("style"),this.transform=a.getAttribute("transform"),this.transform=a.getAttribute("transform"),this.transform){var b=this.transform.split("(");this.translate_x=parseFloat(Number(b[1].substring(0,b[1].indexOf(",")))),this.translate_y=parseFloat(Number(b[1].substring(b[1].indexOf(",")+1,b[1].indexOf(")")))),this.rotate=parseFloat(Number(b[2].substring(0,b[2].indexOf(")")))),this.scale_x=parseFloat(Number(b[3].substring(0,b[3].indexOf(",")))),this.scale_y=parseFloat(Number(b[3].substring(b[3].indexOf(",")+1,b[3].indexOf(")")))),this.center_x=parseFloat(Number(a.getAttribute("pg-xcenter"))),this.center_y=parseFloat(Number(a.getAttribute("pg-ycenter")))}else this.translate_x=0,this.translate_y=0,this.rotate=0,this.scale_x=1,this.scale_y=1,this.center_x=0,this.center_y=0;this.font_family=a.getAttribute("font-family"),this.font_size=parseFloat(a.getAttribute("font-size")),this.font_style=a.getAttribute("font-style"),this.text_anchor=a.getAttribute("text-anchor"),this.baseline_shift=parseFloat(a.getAttribute("baseline-shift")),this.font_weight=a.getAttribute("font-weight"),this.dx=parseFloat(a.getAttribute("dx")),this.dy=parseFloat(a.getAttribute("dy"));for(var c="",d=0;d<a.childNodes.length;d++)"#text"==a.childNodes[d].nodeName&&(c+=a.childNodes[d].nodeValue.trim());this.textLineCount=parseInt(a.getAttribute("pg-line-count")),this.textoneline_height=parseFloat(a.getAttribute("pg-oneline-height")),this.baseline_height=parseFloat(a.getAttribute("baseline-height")),this.textContent=c,this.textLength=this.textContent.length,this.lengthAdjust=a.getAttribute("lengthAdjust");for(var e=a.firstChild,d=0;d<a.childNodes.length&&("script"==e.nodeName&&("ie"==current_browser?CreateFunction(e.text,this):CreateFunction(e.textContent,this)),e.nextSibling);d++)e=e.nextSibling}function CreateImageObj(a){if(this.nodename=a.nodeName,this.xmlns=a.getAttribute("xmlns"),this.xlink=a.getAttribute("xmlns:xlink"),this.id=a.getAttribute("id"),this.prevSibling,this.nextSibling,this.parentObj,this.parentNode,this.ownnode=a.cloneNode(!1),this.childNodes=[],this.appendChild=function(a){this.childNodes.push(a),sibling_update(this)},this.removeChild=function(a){for(var b=0;b<childNodes.length;b++)if(childNodes[b].id==a){this.childNodes.splice(b,1);break}sibling_update(this)},this.visibility=a.getAttribute("visibility"),this.stroke=a.getAttribute("stroke"),this.stroke_opacity=parseFloat(a.getAttribute("stroke-opacity")),this.stroke_width=parseFloat(a.getAttribute("stroke-width")),this.stroke_dasharray=a.getAttribute("stroke-dasharray"),this.stroke_linecap=a.getAttribute("stroke-linecap"),this.stroke_linejoin=a.getAttribute("stroke-linejoin"),this.x=parseFloat(a.getAttribute("x")),this.y=parseFloat(a.getAttribute("y")),this.width=parseFloat(a.getAttribute("width")),this.height=parseFloat(a.getAttribute("height")),this.style=a.getAttribute("style"),this.transform=a.getAttribute("transform"),this.transform){var b=this.transform.split("(");this.translate_x=parseFloat(Number(b[1].substring(0,b[1].indexOf(",")))),this.translate_y=parseFloat(Number(b[1].substring(b[1].indexOf(",")+1,b[1].indexOf(")")))),this.rotate=parseFloat(Number(b[2].substring(0,b[2].indexOf(")")))),this.scale_x=parseFloat(Number(b[3].substring(0,b[3].indexOf(",")))),this.scale_y=parseFloat(Number(b[3].substring(b[3].indexOf(",")+1,b[3].indexOf(")")))),this.center_x=parseFloat(Number(a.getAttribute("pg-xcenter"))),this.center_y=parseFloat(Number(a.getAttribute("pg-ycenter")))}else this.translate_x=0,this.translate_y=0,this.rotate=0,this.scale_x=1,this.scale_y=1,this.center_x=0,this.center_y=0;this.xlink_href=a.getAttribute("xlink:href"),this.b_imageload=!1,this.imageObj=CreateImageSrc(this.id,this.xlink_href,this.width,this.height);for(var c=a.firstChild,d=0;d<a.childNodes.length&&("script"==c.nodeName&&("ie"==current_browser?CreateFunction(c.text,this):CreateFunction(c.textContent,this)),c.nextSibling);d++)c=c.nextSibling}function CreateUseObj(a){function c(a,b){for(var d=b.firstChild,e=0;e<b.childNodes.length;e++){if("script"==d.nodeName?CreateFunction(d.textContent,a):("line"==d.nodeName?(a[d.id]=new CreateLineObj(d),a[d.id].parentObj=a,a.appendChild(a[d.id])):"rect"==d.nodeName?(a[d.id]=new CreateRectObj(d),a[d.id].parentObj=a,a.appendChild(a[d.id])):"polygon"==d.nodeName||"polyline"==d.nodeName?(a[d.id]=new CreatePolygonObj(d),a[d.id].parentObj=a,a.appendChild(a[d.id])):"ellipse"==d.nodeName?(a[d.id]=new CreateEllipseObj(d),a[d.id].parentObj=a,a.appendChild(a[d.id])):"circle"==d.nodeName?(a[d.id]=new CreateCircleObj(d),a[d.id].parentObj=a,a.appendChild(a[d.id])):"text"==d.nodeName?(a[d.id]=new CreateTextObj(d),a[d.id].parentObj=a,a.appendChild(a[d.id])):"path"==d.nodeName?(a[d.id]=new CreatePathObj(d),a[d.id].parentObj=a,a.appendChild(a[d.id])):"g"==d.nodeName?(a[d.id]=new CreateGObj(d),a[d.id].parentObj=a,a.appendChild(a[d.id])):"use"==d.nodeName?(a[d.id]=new CreateUseObj(d),a[d.id].parentObj=a,a.appendChild(a[d.id])):"image"==d.nodeName?(a[d.id]=new CreateImageObj(d),a[d.id].parentObj=a,a.appendChild(a[d.id])):"pg-trend"==d.nodeName?(a[d.id]=new CreateTrendObj(d),a[d.id].parentObj=a,a.appendChild(a[d.id]),window[root_obj_id].trend_list.push(a[d.id])):"pg-pin"==d.nodeName?(a[d.getAttribute("name")]=d.getAttribute("default-value"),a.pin_list.push(new CreatePinObj(d))):"pg-attribute"==d.nodeName?"double"==d.getAttribute("type")||"int"==d.getAttribute("type")||"float"==d.getAttribute("type")?a[d.getAttribute("variable")]=Number(d.getAttribute("initial")):"bool"==d.getAttribute("type")?"TRUE"==d.getAttribute("initial")?a[d.getAttribute("variable")]=Boolean(!0):a[d.getAttribute("variable")]=Boolean(!1):a[d.getAttribute("variable")]=d.getAttribute("initial"):"pg-set-attribute"==d.nodeName&&a.appendChild(new CreateSetAttributeObj(d)),d.childNodes.length&&"hmi"!=d.getAttribute("type")&&("pg-pin"==d.nodeName?c(a,d):c(a[d.id],d))),!d.nextSibling){sibling_update(a);break}d=d.nextSibling}}if(this.nodename=a.nodeName,this.xmlns=a.getAttribute("xmlns"),this.xlink=a.getAttribute("xmlns:xlink"),this.id=a.getAttribute("id"),this.childNodes=[],this.prevSibling,this.nextSibling,this.parentObj,this.parentNode,this.ownnode=a.cloneNode(!1),this.appendChild=function(a){this.childNodes.push(a),sibling_update(this)},this.removeChild=function(a){for(var b=0;b<childNodes.length;b++)if(childNodes[b].id==a){this.childNodes.splice(b,1);break}sibling_update(this)},this.pin_list=[],this.visibility=a.getAttribute("visibility"),this.stroke=a.getAttribute("stroke"),this.stroke_opacity=parseFloat(a.getAttribute("stroke-opacity")),this.stroke_width=parseFloat(a.getAttribute("stroke-width")),this.stroke_dasharray=a.getAttribute("stroke-dasharray"),this.stroke_linecap=a.getAttribute("stroke-linecap"),this.stroke_linejoin=a.getAttribute("stroke-linejoin"),this.x=parseFloat(a.getAttribute("x")),this.y=parseFloat(a.getAttribute("y")),this.width=parseFloat(a.getAttribute("width")),this.height=parseFloat(a.getAttribute("height")),this.style=a.getAttribute("style"),this.transform=a.getAttribute("transform"),this.transform){var b=this.transform.split("(");this.translate_x=parseFloat(Number(b[1].substring(0,b[1].indexOf(",")))),this.translate_y=parseFloat(Number(b[1].substring(b[1].indexOf(",")+1,b[1].indexOf(")")))),this.rotate=parseFloat(Number(b[2].substring(0,b[2].indexOf(")")))),this.scale_x=parseFloat(Number(b[3].substring(0,b[3].indexOf(",")))),this.scale_y=parseFloat(Number(b[3].substring(b[3].indexOf(",")+1,b[3].indexOf(")")))),this.center_x=parseFloat(Number(a.getAttribute("pg-xcenter"))),this.center_y=parseFloat(Number(a.getAttribute("pg-ycenter")))}else this.translate_x=0,this.translate_y=0,this.rotate=0,this.scale_x=1,this.scale_y=1,this.center_x=0,this.center_y=0;this.type=a.getAttribute("type"),c(this,a)}function CreatePinObj(a){this.id=a.getAttribute("id"),this.childNodes=[],this.name=a.getAttribute("name"),this.desc=a.getAttribute("desc"),this.pin_type=a.getAttribute("pin-type"),this.max_value=a.getAttribute("max-value"),this.min_value=a.getAttribute("min-value"),this.default_value=a.getAttribute("default-value"),this.color=a.getAttribute("color"),this.var_type=a.getAttribute("var-type"),this.dim1=a.getAttribute("dim1"),this.dim2=a.getAttribute("dim2"),this.unit=a.getAttribute("unit")}function CreateSetAttributeObj(a){this.nodename=a.nodeName,this.id=a.getAttribute("id"),this.variable=a.getAttribute("variable"),this.value=a.getAttribute("value")}function CreateLineGridentObj(a){this.id=a.getAttribute("id"),this.type="line",this.x1=parseFloat(a.getAttribute("x1")),this.y1=parseFloat(a.getAttribute("y1")),this.x2=parseFloat(a.getAttribute("x2")),this.y2=parseFloat(a.getAttribute("y2")),this.childNodes=[],this.appendChild=function(a){this.childNodes.push(a),sibling_update(this)},this.removeChild=function(a){for(var b=0;b<childNodes.length;b++)if(childNodes[b].id==a){this.childNodes.splice(b,1);break}sibling_update(this)};for(var b=[],c=0;c<a.childNodes.length;c++)if("stop"==a.childNodes[c].nodeName){var d=new CreateStopGridentObj(a.childNodes[c]);b.push(d)}this.stop=b}function CreateRadialGridentObj(a){this.id=a.getAttribute("id"),this.type="radial",this.cx=parseFloat(a.getAttribute("cx")),this.cy=parseFloat(a.getAttribute("cy")),this.fx=parseFloat(a.getAttribute("fx")),this.fy=parseFloat(a.getAttribute("fy")),this.r=parseFloat(a.getAttribute("r")),this.childNodes=[],this.appendChild=function(a){this.childNodes.push(a),sibling_update(this)},this.removeChild=function(a){for(var b=0;b<childNodes.length;b++)if(childNodes[b].id==a){this.childNodes.splice(b,1);break}sibling_update(this)};for(var b=[],c=0;c<a.childNodes.length;c++)if("stop"==a.childNodes[c].nodeName){var d=new CreateStopGridentObj(a.childNodes[c]);b.push(d)}this.stop=b}function CreateStopGridentObj(a){this.offsets=.01*parseFloat(a.getAttribute("offset"));var b=a.getAttribute("style"),c="rgba(",d=b,e=d.split(";");d=e[0].replace("stop-color:rgb(",""),d=d.replace(")",""),c+=d,d=e[1].replace("stop-opacity:",""),c=c+","+d+")",this.stopStyle=c}function CreateImageSrc(a,b){b=b.trim();var c="img_"+a;if($("#"+c).length>0){if($("#"+c)[0].src!=b){$("#"+c).remove();var e='<img id="'+c+'" src="'+b+'" style="display:none">';$("#imageLists").length>0&&$("#imageLists").append(e)}}else{var e='<img id="'+c+'" src="'+b+'" style="display:none">';$("#imageLists").length>0&&$("#imageLists").append(e)}return $("#"+c)[0]}var linkobj_list=[],root_obj_id,symbol_list,interval_id,current_page,interval_page_value,current_browser,old_time_value=-1,time_value=0,time_flag=!1,prev_time_mode,GridentList=[],mouse_over_obj;
function coordinates(){this.x,this.y}function ellipseradius(){this.rx,this.ry}function CreateCanvas(){if(canvas=$("#ID_CANVAS")[0],canvas_2Ddraw=canvas.getContext("2d"),canvas.addEventListener("click",mouseclick,!1),canvas.addEventListener("touchstart",mousedown,!1),canvas.addEventListener("dblclick",mousedblclick,!1),canvas.addEventListener("mousemove",mousemove,!1),canvas.addEventListener("mouseup",mouseup,!1),canvas.addEventListener("mousedown",mousedown,!1),canvas.addEventListener("mouseover",mouseover,!1),canvas.addEventListener("mouseout",mouseout,!1),canvas.addEventListener("load",onload,!1),canvas.addEventListener("DOMActivate",DOMActivate,!1),canvas.addEventListener("DOMFocusIn",DOMFocusIn,!1),canvas.addEventListener("DOMFocusOut",DOMFocusOut,!1),ctx=new CanvasWrapper(canvas_2Ddraw),canvas.id="ID_CANVAS",0==$("#imageLists").length){$("#Canvas_contents").append('<div id="imageLists"></div>')}m_worldPos.x=0,m_worldPos.y=0,m_mouseOldPos.x=0,m_mouseOldPos.y=0,m_bAutoscale=!1,m_wordldScale.x=1,m_wordldScale.y=1}function mouseclick(a){for(var b=0;b<BoundBoxs.length;b++){var c=BoundBoxs[b][0],d=BoundBoxs[b][1];"path"==d.nodename||"polyline"==d.nodename?ctx.isPointInPath&&ctx.isPointInPath(a.offsetX,a.offsetY)&&void 0!=d._onclick&&(d._onclick(),Draw_All(window[root_obj_id])):c.isPointInBox(a.offsetX,a.offsetY)&&void 0!=d._onclick&&(d._onclick(),Draw_All(window[root_obj_id]))}}function mousedblclick(a){for(var b=0;b<BoundBoxs.length;b++){BoundBoxs[b][0],BoundBoxs[b][1]}}function mousemove(a){1==m_svgmoveflag&&(m_worldPos.x=m_worldPos.x+a.offsetX-m_mouseOldPos.x,m_worldPos.y=m_worldPos.y+a.offsetY-m_mouseOldPos.y),m_mouseOldPos.x=a.offsetX,m_mouseOldPos.y=a.offsetY;for(var b=0;b<BoundBoxs.length;b++){var c=BoundBoxs[b][0],d=BoundBoxs[b][1];"path"==d.nodename||"polyline"==d.nodename?ctx.isPointInPath&&ctx.isPointInPath(a.offsetX,a.offsetY)&&(void 0==d._onmousemove&&"svg"!=d.nodename||(d._onmousemove(),Draw_All(window[root_obj_id])),void 0==d._onmouseover&&"svg"!=d.nodename||mouse_over_obj==d||(void 0==mouse_over_obj._onmouseout&&"svg"!=d.nodename||mouse_over_obj==d||(void 0!=mouse_over_obj._onmouseout&&mouse_over_obj._onmouseout(),Draw_All(window[root_obj_id])),d._onmouseover&&d._onmouseover(),mouse_over_obj=d,Draw_All(window[root_obj_id]))):c.isPointInBox(a.offsetX,a.offsetY)&&(void 0!=d._onmousemove&&(d._onmousemove(),Draw_All(window[root_obj_id])),void 0==d._onmouseover&&"svg"!=d.nodename||mouse_over_obj==d||(void 0==mouse_over_obj._onmouseout&&"svg"!=d.nodename||mouse_over_obj==d||(void 0!=mouse_over_obj._onmouseout&&mouse_over_obj._onmouseout(),Draw_All(window[root_obj_id])),d._onmouseover&&d._onmouseover(),mouse_over_obj=d,Draw_All(window[root_obj_id])))}}function mouseup(a){1==m_svgmoveflag&&(m_svgmoveflag=!1),m_mouseOldPos.x=a.offsetX,m_mouseOldPos.y=a.offsetY;for(var b=0;b<BoundBoxs.length;b++){var c=BoundBoxs[b][0],d=BoundBoxs[b][1];"path"==d.nodename||"polyline"==d.nodename?ctx.isPointInPath&&ctx.isPointInPath(a.offsetX,a.offsetY)&&void 0!=d._onmouseup&&(d._onmouseup(),Draw_All(window[root_obj_id])):c.isPointInBox(a.offsetX,a.offsetY)&&void 0!=d._onmouseup&&(d._onmouseup(),Draw_All(window[root_obj_id]))}}function mousedown(a){for(var b=0;b<BoundBoxs.length;b++){var c=BoundBoxs[b][0],d=BoundBoxs[b][1];"path"==d.nodename||"polyline"==d.nodename?ctx.isPointInPath&&ctx.isPointInPath(a.offsetX,a.offsetY)&&void 0!=d._onmousedown&&(d._onmousedown(),Draw_All(window[root_obj_id])):"svg"==d.nodename?m_svgmoveflag=!0:c.isPointInBox(a.offsetX,a.offsetY)&&void 0!=d._onmousedown&&(d._onmousedown(),Draw_All(window[root_obj_id]))}m_mouseStartPos.x=a.offsetX,m_mouseStartPos.y=a.offsetY}function mouseover(a){for(var b=0;b<BoundBoxs.length;b++){var c=BoundBoxs[b][0],d=BoundBoxs[b][1];"path"==d.nodename||"polyline"==d.nodename?ctx.isPointInPath&&ctx.isPointInPath(a.offsetX,a.offsetY)&&void 0!=d._onmouseover&&(d._onmouseover(),Draw_All(window[root_obj_id])):c.isPointInBox(a.offsetX,a.offsetY)&&void 0!=d._onmouseover&&(d._onmouseover(),Draw_All(window[root_obj_id]))}}function mouseout(a){for(var b=0;b<BoundBoxs.length;b++){var c=BoundBoxs[b][0],d=BoundBoxs[b][1];"path"==d.nodename||"polyline"==d.nodename?ctx.isPointInPath&&ctx.isPointInPath(a.offsetX,a.offsetY)&&void 0!=d._onmouseout&&(d._onmouseout(),Draw_All(window[root_obj_id])):c.isPointInBox(a.offsetX,a.offsetY)&&void 0!=d._onmouseout&&(d._onmouseout(),Draw_All(window[root_obj_id]))}Draw_All(window[root_obj_id])}function onload(a){for(var b=0;b<BoundBoxs.length;b++){var c=BoundBoxs[b][0],d=BoundBoxs[b][1];"path"==d.nodename||"polyline"==d.nodename?ctx.isPointInPath&&ctx.isPointInPath(a.offsetX,a.offsetY)&&void 0!=d._onload&&(d._onload(),Draw_All(window[root_obj_id])):c.isPointInBox(a.offsetX,a.offsetY)&&void 0!=d._onload&&(d._onload(),Draw_All(window[root_obj_id]))}}function DOMActivate(a){for(var b=0;b<BoundBoxs.length;b++){var c=BoundBoxs[b][0],d=BoundBoxs[b][1];"path"==d.nodename||"polyline"==d.nodename?ctx.isPointInPath&&ctx.isPointInPath(a.offsetX,a.offsetY)&&void 0!=d._onactivate&&(d._onactivate(),Draw_All(window[root_obj_id])):c.isPointInBox(a.offsetX,a.offsetY)&&void 0!=d._onactivate&&(d._onactivate(),Draw_All(window[root_obj_id]))}}function DOMFocusIn(a){for(var b=0;b<BoundBoxs.length;b++){var c=BoundBoxs[b][0],d=BoundBoxs[b][1];"path"==d.nodename||"polyline"==d.nodename?ctx.isPointInPath&&ctx.isPointInPath(a.offsetX,a.offsetY)&&void 0!=d._onfocusin&&(d._onfocusin(),Draw_All(window[root_obj_id])):c.isPointInBox(a.offsetX,a.offsetY)&&void 0!=d._onfocusin&&(d._onfocusin(),Draw_All(window[root_obj_id]))}}function DOMFocusOut(a){for(var b=0;b<BoundBoxs.length;b++){var c=BoundBoxs[b][0],d=BoundBoxs[b][1];"path"==d.nodename||"polyline"==d.nodename?ctx.isPointInPath&&ctx.isPointInPath(a.offsetX,a.offsetY)&&void 0!=d._onfocusout&&(d._onfocusout(),Draw_All(window[root_obj_id])):c.isPointInBox(a.offsetX,a.offsetY)&&void 0!=d._onfocusout&&(d._onfocusout(),Draw_All(window[root_obj_id]))}}function ToNumberArray(a){for(var b=trim(compressSpaces((a||"").replace(/,/g," "))).split(" "),c=0;c<b.length;c++)b[c]=parseFloat(b[c]);return b}function CreatePath(a){for(var b=ToNumberArray(a),c=[],d=0;d<b.length;d+=2)c.push(new enuPoint(b[d],b[d+1]));return c}function Draw_Init(a){void 0!=a&&(BoundBoxs=[],mousewheelevt=/Firefox/i.test(navigator.userAgent)?"DOMMouseScroll":"mousewheel",canvas.attachEvent?canvas.attachEvent("on"+mousewheelevt,onmousewheel):canvas.addEventListener&&canvas.addEventListener(mousewheelevt,onmousewheel,!1))}function Draw_All(a){if(void 0!=a&&"svg"==a.nodename){CanvasSetup(),ctx.rect(0,0,canvas.width,canvas.height),SetStyle(a),ctx.globalAlpha=a.fill_opacity,ctx.fill(),ctx.globalAlpha=a.stroke_opacity,ctx.stroke(),ctx.save(),InitMt=createMatrixIdentity(),ctx.setMatrix(InitMt);var b=1,c=1;if(m_bAutoscale){var d=1;d=a.width/canvas.clientWidth>a.height/canvas.clientHeight?canvas.clientWidth/a.width:canvas.clientHeight/a.height,b=m_wordldScale.x*d,c=m_wordldScale.y*d}else b=m_wordldScale.x,c=m_wordldScale.y;ctx.translate(m_worldPos.x,m_worldPos.y),ctx.scale(b,c),InitMt=ctx.getMatrix(),BoundBoxs=[];var e=new BoundingBox(0,0,canvas.width,canvas.height),f=[e,a];BoundBoxs.push(f),renderObj(a,InitMt),ctx.restore();ctx.getMatrix()}}function IsPrimitive(a){return"line"==a||"rect"==a||"polygon"==a||"polyline"==a||"path"==a||"text"==a||"g"==a||"use"==a}function IsTrendObj(a){return"pg-trend"==a||"pg-trendtitle"==a||"pg-trendlegend"==a||"pg-trendxaxis"==a||"pg-trendyaxis"==a||"pg-trendgraph"==a||"pg-trendseries"==a}function renderObj(a,b,c){if(a){var e,d=[];if(a.childNodes.length){for(var f=0;f<a.childNodes.length;f++){var g=a.childNodes[f],h=InitMt;if("line"==g.nodename&&0!=g.visibility)h=DrawLineObj(g,b,d);else if("rect"==g.nodename&&0!=g.visibility)h=DrawRectObj(g,b,d);else if("polygon"!=g.nodename&&"polyline"!=g.nodename||0==g.visibility)if("ellipse"!=g.nodename&&"circle"!=g.nodename||0==g.visibility)if("path"==g.nodename&&0!=g.visibility)h=DrawPathObj(g,b,d);else if("text"==g.nodename&&0!=g.visibility)h=DrawTextObj(g,b,d);else if("image"==g.nodename&&0!=g.visibility)h=DrawImageObj(g,b,d);else if("g"==g.nodename&&0!=g.visibility){h=DrawGObj(g,b),e=new BoundingBox;var i=[e,a];d.push(i)}else if("use"==g.nodename&&0!=g.visibility){h=DrawUseObj(g,b),e=new BoundingBox;var i=[e,a];d.push(i)}else if("pg-link"==g.nodename)Activelinkcolor(g);else if("pg-set-attribute"==g.nodename)pgSetAttribute(a,g);else if("pg-trend"==g.nodename&&0!=g.visibility){h=DrawTrendObj(g,b,d),e=new BoundingBox;var i=[e,a];d.push(i)}else h="pg-trendtitle"==g.nodename&&"hidden"!=a.title_visible?DrawTrendtitleObj(g,b,d):"pg-trendlegend"==g.nodename&&"hidden"!=a.legend_visible?DrawTrendlegendObj(g,b,d):"pg-trendxaxis"==g.nodename?DrawTrendxaxisObj(g,b,d):"pg-trendyaxis"==g.nodename?DrawTrendyaxisObj(g,b,d):"pg-trendgraph"==g.nodename&&"hidden"!=a.grid_visible?DrawTrendgraphObj(g,b,d):"pg-trendseries"==g.nodename&&"hidden"!=a.visibility?DrawTrendseriesObj(g,b,d):b;else h=DrawEllipseObj(g,b,d);else h=DrawPolygonObj(g,b,d);g.childNodes&&0!=g.childNodes.length&&(IsPrimitive(g.nodename)||IsTrendObj(g.nodename))&&0!=g.visibility&&renderObj(g,h,e)}if("g"==a.nodename||"use"==a.nodename){bb=c;for(var f=0;f<d.length;f++)bb.addBoundingBox(d[f][0]);var i=[bb,a];BoundBoxs.push(i);for(var f=0;f<d.length;f++)BoundBoxs.push(d[f]);d=[]}}}}function Activelinkcolor(a){var b=a.parentObj,c=window[a.from_id].pin_list;if(c.length)for(var d in c)if("bool"==c[d].var_type&&c[d].name==a.param_from){var e=window[a.from_id][a.param_from];0==e?(b.stroke="rgb(255,0,0)",b.fill="rgb(255,0,0)"):(b.stroke="rgb(0,255,0)",b.fill="rgb(0,255,0)")}}function pgSetAttribute(parentobj,childnode){-1!=childnode.value.indexOf("#")&&(parentobj[childnode.variable.substring(1,childnode.variable.length)]=eval(childnode.value.substring(1,childnode.value.length)))}function SetTransform(a){ctx.translate(parseFloat(a.translate_x),parseFloat(a.translate_y)),ctx.translate(parseFloat(a.center_x),parseFloat(a.center_y)),ctx.scale(a.scale_x,a.scale_y),ctx.rotate(a.rotate*Math.PI/180),ctx.translate(parseFloat(-a.center_x),parseFloat(-a.center_y))}function SetTextStyle(a){var b;"undefined"!=a.stroke||""!=a.stroke?ctx.fillStyle=a.stroke:ctx.fillStyle="rgb(0,0,0)";var c="";"undefined"!=a.font_style&&(c+=a.font_style+" "),"undefined"!=a.font_style&&("bold"!=a.font_weight&&"BOLD"!=a.font_weight||(b="bold",c+=b+" ")),"undefined"!=a.font_size?c+=a.font_size+" ":c+="10 ","undefined"!=a.font_family&&(c+=a.font_family),ctx.font=c}function SetStyle(a){if(-1!=a.fill.indexOf("rgb("))ctx.fillStyle=a.fill;else if(-1!=a.fill.indexOf("#")&&-1==a.fill.indexOf("url")){var b=a.fill.substring(1,3),c=a.fill.substring(3,5),d=a.fill.substring(5,7),e="rgb("+parseInt(b,16)+","+parseInt(c,16)+","+parseInt(d,16)+")";ctx.fillStyle=e}ctx.strokeStyle=a.stroke,"undefined"!=a.stroke_width?ctx.lineWidth=a.stroke_width:ctx.lineWidth=1,ctx.lineCap=a.stroke_linecap,ctx.lineJoin=a.stroke_linejoin;var f=ToNumberArray(a.stroke_dasharray);if("NaN"!=String(f))void 0!==ctx.setLineDash&&ctx.setLineDash(f);else{var g=[];ctx.setLineDash(g)}}function DrawLineObj(a,b,c){var d=!1,e=a.parentObj;if(d="g"==e.nodename||"use"==e.nodename,ctx.setMatrix(b),SetTransform(a),SetStyle(a),0==a.visibility)return ctx.getMatrix();ctx.globalAlpha=a.stroke_opacity,ctx.beginPath(),ctx.moveTo(a.x1,a.y1),ctx.lineTo(a.x2,a.y2),ctx.stroke(),ctx.closePath(),DrawArrow(a);var f=ctx.getCoords(a.x1,a.y1),g=ctx.getCoords(a.x2,a.y2);f.x-g.x<1&&f.x-g.x>-1&&(f.x=f.x-2,g.x=g.x+2),f.y-g.y<1&&f.y-g.y>-1&&(f.y=f.y-2,g.y=g.y+2);var h=new BoundingBox(f.x,f.y,g.x,g.y),i=[h,a];return d?c.push(i):BoundBoxs.push(i),ctx.getMatrix()}function DrawRectObj(a,b,c){var d=!1,e=a.parentObj;if(d="g"==e.nodename||"use"==e.nodename,ctx.setMatrix(b),SetTransform(a),SetStyle(a),0==a.visibility)return ctx.getMatrix();var f=a.x,g=a.y,h=a.rx,i=a.ry,j=a.width,k=a.height;ctx.beginPath(),ctx.moveTo(f+h,g),ctx.lineTo(f+j-h,g),ctx.quadraticCurveTo(f+j,g,f+j,g+i),ctx.lineTo(f+j,g+k-i),ctx.quadraticCurveTo(f+j,g+k,f+j-h,g+k),ctx.lineTo(f+h,g+k),ctx.quadraticCurveTo(f,g+k,f,g+k-i),ctx.lineTo(f,g+i),ctx.quadraticCurveTo(f,g,f+h,g),ctx.closePath();var l=ctx.getCoords(a.x,a.y),m=ctx.getCoords(a.x+a.width,a.y+a.height);l.x-m.x<1&&l.x-m.x>-1&&(l.x=l.x-1,m.x=m.x+1),l.y-m.y<1&&l.y-m.y>-1&&(l.y=l.y-1,m.y=m.y+1);var n=new BoundingBox(l.x,l.y,m.x,m.y),o=[n,a];return SetGrident(n,a),ctx.globalAlpha=a.fill_opacity,ctx.fill(),ctx.globalAlpha=a.stroke_opacity,ctx.stroke(),d?c.push(o):BoundBoxs.push(o),ctx.getMatrix()}function DrawPolygonObj(a,b,c){var d=!1,e=a.parentObj;if(d="g"==e.nodename||"use"==e.nodename,ctx.setMatrix(b),SetTransform(a),SetStyle(a),0==a.visibility)return ctx.getMatrix();var f=CreatePath(a.points);if(0!=f.length){ctx.beginPath(),ctx.moveTo(f[0].x,f[0].y);for(var g=ctx.getCoords(f[0].x,f[0].y),h=new BoundingBox(g.x,g.y),i=1;i<f.length;i++)ctx.lineTo(f[i].x,f[i].y),g=ctx.getCoords(f[i].x,f[i].y),h.addPoint(g.x,g.y);SetGrident(h,a),"polygon"==a.nodename?(ctx.closePath(),ctx.globalAlpha=a.fill_opacity,ctx.fill(),ctx.globalAlpha=a.stroke_opacity,ctx.stroke()):(ctx.globalAlpha=a.stroke_opacity,ctx.stroke(),DrawArrow(a));var j=[h,a];d?c.push(j):BoundBoxs.push(j)}return ctx.getMatrix()}function IsClipObj(a){return"Donut"==a||("Symbol"==a||"Frame"==a)}function DrawPathObj(a,b,c){function x(){switch(t){case"m":case"l":case"h":case"v":case"c":case"s":case"q":case"t":case"a":case"z":return!0}return!1}function y(){return i++,j[i]}function z(a){return x()&&(a.x+=q.x,a.y+=q.y),a}function A(){return parseFloat(y())}function B(){return z(new enuPoint(A(),A()))}function C(){var a=B();return q=a,a}function D(){var a=B();return control=a,a}function E(){u=t,t=y()}function F(){return i>=j.length-1}function G(){return!!F()||null!=j[i+1].match(/^[A-Za-z]$/)}function J(){return"c"!=u.toLowerCase()&&"s"!=u.toLowerCase()&&"q"!=u.toLowerCase()&&"t"!=u.toLowerCase()?q:new enuPoint(2*q.x-control.x,2*q.y-control.y)}var d=!1,e=a.parentObj;if(d="g"==e.nodename||"use"==e.nodename,ctx.setMatrix(b),SetTransform(a),SetStyle(a),0==a.visibility)return ctx.getMatrix();ctx.globalAlpha=1;var f=IsClipObj(a.datatype),g=!1,h=a.d,i=-1;h=h.replace(/,/g," ");for(var j=[],k="",l="",m=0;m<h.length;m++){var n=h[m];switch(n){case"M":case"m":case"L":case"l":case"H":case"h":case"V":case"v":case"C":case"c":case"S":case"s":case"Q":case"q":case"T":case"t":case"A":case"a":case"Z":case"z":if(""!=k){j.push(l);for(var o=k.split(" "),p=0;p<o.length;p++)""!=o[p]&&j.push(o[p])}l=n,k="";break;default:k+=n}}if(" "!=l){j.push(l);for(var o=k.split(" "),m=0;m<o.length;m++)""!=o[m]&&j.push(o[m])}var q=new enuPoint(0,0),t=(new enuPoint(0,0),new enuPoint(0,0),""),u="",K=!0;ctx.beginPath();var M=new BoundingBox,N=!1;for("Donut"!=a.data_type&&"Symbol"!=a.data_type&&"Frame"!=a.data_type||(N=!0);!F();)switch(E(),t){case"M":case"m":0==K&&(0==g?(ctx.globalAlpha=a.stroke_opacity,ctx.stroke()):1==f&&(canvas_2Ddraw.globalCompositeOperation="destination-out"),N||ctx.beginPath()),1==K&&(K=!1);var O=C();ctx.moveTo(O.x,O.y);var P=ctx.getCoords(O.x,O.y);for(M.addPoint(P.x,P.y),start=q;!G();){var O=C(),P=ctx.getCoords(O.x,O.y);M.addPoint(P.x,P.y),null!=ctx&&ctx.lineTo(O.x,O.y)}g=!1;break;case"L":case"l":for(;!G();){var O=C(),P=ctx.getCoords(O.x,O.y);M.addPoint(P.x,P.y),ctx.lineTo(O.x,O.y)}break;case"H":case"h":for(;!G();){var R=new enuPoint((x()?q.x:0)+A(),q.y);q=R;var P=ctx.getCoords(q.x,q.y);M.addPoint(P.x,P.y),null!=ctx&&ctx.lineTo(q.x,q.y)}break;case"V":case"v":for(;!G();){var R=new enuPoint(q.x,(x()?q.y:0)+A());q=R;var P=ctx.getCoords(q.x,q.y);M.addPoint(P.x,P.y),ctx.lineTo(q.x,q.y)}break;case"C":case"c":for(;!G();){var S=q,T=B(),U=D(),V=C(),P=ctx.getCoords(S.x,S.y),W=ctx.getCoords(T.x,T.y),X=ctx.getCoords(U.x,U.y),Y=ctx.getCoords(V.x,V.y);M.addBezierCurve(P.x,P.y,W.x,W.y,X.x,X.y,Y.x,Y.y),ctx.bezierCurveTo(T.x,T.y,U.x,U.y,V.x,V.y)}break;case"S":case"s":for(;!G();){var S=q,T=J(),U=D(),V=C(),P=ctx.getCoords(S.x,S.y),W=ctx.getCoords(T.x,T.y),X=ctx.getCoords(U.x,U.y),Y=ctx.getCoords(V.x,V.y);M.addBezierCurve(P.x,P.y,W.x,W.y,X.x,X.y,Y.x,Y.y),ctx.bezierCurveTo(T.x,T.y,U.x,U.y,V.x,V.y)}break;case"Q":case"q":for(;!G();){var S=q,U=D(),V=C(),P=ctx.getCoords(S.x,S.y),W=ctx.getCoords(U.x,U.y),X=ctx.getCoords(V.x,V.y);M.addQuadraticCurve(P.x,P.y,W.x,W.y,X.x,X.y),ctx.quadraticCurveTo(U.x,U.y,V.x,V.y)}break;case"T":case"t":for(;!pp.isCommandOrEnd();){var S=q,U=J();control=U;var V=C(),P=ctx.getCoords(S.x,S.y),W=ctx.getCoords(U.x,U.y),X=ctx.getCoords(V.x,V.y);M.addQuadraticCurve(P.x,P.y,W.x,W.y,X.x,X.y),ctx.quadraticCurveTo(U.x,U.y,V.x,V.y)}break;case"A":case"a":for(;!G();){var S=q,Z=A(),$=A(),_=A()*(Math.PI/180),aa=A(),ba=A(),V=C();V.x=V.x,V.y=V.y;var ca=new enuPoint(Math.cos(_)*(S.x-V.x)/2+Math.sin(_)*(S.y-V.y)/2,-Math.sin(_)*(S.x-V.x)/2+Math.cos(_)*(S.y-V.y)/2),da=Math.pow(ca.x,2)/Math.pow(Z,2)+Math.pow(ca.y,2)/Math.pow($,2);da>1&&(Z*=Math.sqrt(da),$*=Math.sqrt(da));var ea=(aa==ba?-1:1)*Math.sqrt((Math.pow(Z,2)*Math.pow($,2)-Math.pow(Z,2)*Math.pow(ca.y,2)-Math.pow($,2)*Math.pow(ca.x,2))/(Math.pow(Z,2)*Math.pow(ca.y,2)+Math.pow($,2)*Math.pow(ca.x,2)));isNaN(ea)&&(ea=0);var fa=new enuPoint(ea*Z*ca.y/$,ea*-$*ca.x/Z),ga=new enuPoint((S.x+V.x)/2+Math.cos(_)*fa.x-Math.sin(_)*fa.y,(S.y+V.y)/2+Math.sin(_)*fa.x+Math.cos(_)*fa.y),ha=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2))},ia=function(a,b){return(a[0]*b[0]+a[1]*b[1])/(ha(a)*ha(b))},ja=function(a,b){return(a[0]*b[1]<a[1]*b[0]?-1:1)*Math.acos(ia(a,b))},ka=ja([1,0],[(ca.x-fa.x)/Z,(ca.y-fa.y)/$]),la=[(ca.x-fa.x)/Z,(ca.y-fa.y)/$],ma=[(-ca.x-fa.x)/Z,(-ca.y-fa.y)/$],na=ja(la,ma);ia(la,ma)<=-1&&(na=Math.PI),ia(la,ma)>=1&&(na=0);var oa=1-ba?1:-1,pa=ka+oa*(na/2),P=(new enuPoint(ga.x+Z*Math.cos(pa),ga.y+$*Math.sin(pa)),ctx.getCoords(V.x,V.y));if(M.addPoint(P.x,P.y),null!=ctx){var ia=Z>$?Z:$,ra=Z>$?1:Z/$,sa=Z>$?$/Z:1;ctx.translate(ga.x,ga.y),ctx.rotate(_),ctx.scale(ra,sa),ctx.arc(0,0,ia,ka,ka+na,1-ba),ctx.scale(1/ra,1/sa),ctx.rotate(-_),ctx.translate(-ga.x,-ga.y)}}break;case"Z":case"z":ctx.closePath(),SetGrident(M,a),ctx.globalAlpha=a.fill_opacity,N||ctx.fill(),1==f&&(canvas_2Ddraw.globalCompositeOperation="source-over"),ctx.globalAlpha=a.stroke_opacity,ctx.stroke(),g=!0,q=start}N&&(canvas_2Ddraw.mozFillRule="evenodd",canvas_2Ddraw.fill("evenodd")),0==g&&(ctx.globalAlpha=a.stroke_opacity,ctx.stroke()),canvas_2Ddraw.globalCompositeOperation="source-over";var ta=[M,a];return d?c.push(ta):BoundBoxs.push(ta),ctx.getMatrix()}function DrawEllipseObj(a,b,c){var d=!1,e=a.parentObj;if(d="g"==e.nodename||"use"==e.nodename,ctx.setMatrix(b),SetTransform(a),SetStyle(a),0==a.visibility)return ctx.getMatrix();var f=(Math.sqrt(2)-1)/3*4,g=parseFloat(a.rx),h=parseFloat(a.ry),i=parseFloat(a.cx),j=parseFloat(a.cy);if("ellipse"==a.nodename?(g=parseFloat(a.rx),h=parseFloat(a.ry)):(g=parseFloat(a.r),h=parseFloat(a.r)),ctx.globalAlpha=a.fill_opacity,null!=ctx){ctx.beginPath(),ctx.moveTo(i,j-h),ctx.bezierCurveTo(i+f*g,j-h,i+g,j-f*h,i+g,j),ctx.bezierCurveTo(i+g,j+f*h,i+f*g,j+h,i,j+h),ctx.bezierCurveTo(i-f*g,j+h,i-g,j+f*h,i-g,j),ctx.bezierCurveTo(i-g,j-f*h,i-f*g,j-h,i,j-h),ctx.closePath();var k=ctx.getCoords(i-g,j-h),l=ctx.getCoords(i+g,j+h),m=new BoundingBox(k.x,k.y,l.x,l.y),n=[m,a];SetGrident(m,a),ctx.globalAlpha=a.fill_opacity,ctx.fill(),ctx.globalAlpha=a.stroke_opacity,ctx.stroke(),d?c.push(n):BoundBoxs.push(n)}return ctx.getMatrix()}function DrawTextObj(a,b,c){var d=!1,e=a.parentObj;if(d="g"==e.nodename||"use"==e.nodename,ctx.setMatrix(b),SetTransform(a),0==a.visibility)return ctx.getMatrix();var f;void 0!=a.stroke||""!=a.stroke?canvas_2Ddraw.fillStyle=a.stroke:canvas_2Ddraw.fillStyle="rgb(0,0,0)",canvas_2Ddraw.globalAlpha=1;var g="";void 0!=a.font_style&&(g+=a.font_style+" "),void 0!=a.font_style&&("bold"!=a.font_weight&&"BOLD"!=a.font_weight||(f="bold",g+=f+" ")),void 0!=a.font_size?g+=a.font_size+"px ":g+="10px ",void 0!=a.font_family&&(g+=a.font_family),canvas_2Ddraw.font=g;var h=parseFloat(a.x),i=parseFloat(a.y),j=parseFloat(a.dx),k=parseFloat(a.dy),l=canvas_2Ddraw.measureText(a.textContent),m=h+j,n=i+k;n+=.3*a.baseline_height;var p=a.textContent.toString().split("\n");"middle"==a.text_anchor?canvas_2Ddraw.textAlign="center":canvas_2Ddraw.textAlign=a.text_anchor,canvas_2Ddraw.globalAlpha=a.stroke_opacity;for(var q=0;q<p.length;q++)canvas_2Ddraw.fillText(p[q],m,n+a.textoneline_height*q);var r=a.font_size,s=ctx.getCoords(h,i-r),t=ctx.getCoords(h+l.width,i),u=new BoundingBox(s.x,s.y,t.x,t.y),v=[u,a];return d?c.push(v):BoundBoxs.push(v),ctx.getMatrix()}function DrawGObj(a,b){return ctx.setMatrix(b),SetTransform(a),ctx.getMatrix()}function DrawUseObj(a,b){return ctx.setMatrix(b),SetTransform(a),ctx.getMatrix()}function DrawImageObj(a,b,c){var d=!1,e=a.parentObj;if(d="g"==e.nodename||"use"==e.nodename,ctx.setMatrix(b),SetTransform(a),0==a.visibility)return ctx.getMatrix();canvas_2Ddraw.globalAlpha=1;var f=ctx.getCoords(a.x,a.y),g=ctx.getCoords(a.x+a.width,a.y+a.height);a.imageObj=CreateImageSrc(a.id,a.xlink_href),canvas_2Ddraw.drawImage(a.imageObj,a.x,a.y,a.width,a.height);var h=new BoundingBox(f.x,f.y,g.x,g.y),i=[h,a];return d?c.push(i):BoundBoxs.push(i),ctx.getMatrix()}function DrawArrow(a){if("line"==a.nodename){var b=[],c=new coordinates,d=new coordinates;c.x=a.x1,c.y=a.y1,d.x=a.x2,d.y=a.y2;var e=a.begin_arrow_type,f=a.begin_arrow_span,g=a.begin_arrow_size,h=a.end_arrow_type,i=a.end_arrow_span,j=a.end_arrow_size;if("none"!=e)if("arrow"==e||"line arrow"==e||"stealth arrow"==e?"large1"==f?b=CalArrowPoint(e,1.5*g,60,d,c):"large2"==f?b=CalArrowPoint(e,1.5*g,45,d,c):"large3"==f?b=CalArrowPoint(e,1.5*g,30,d,c):"medium1"==f?b=CalArrowPoint(e,g,60,d,c):"medium2"==f?b=CalArrowPoint(e,g,45,d,c):"medium3"==f?b=CalArrowPoint(e,g,30,d,c):"small1"==f?b=CalArrowPoint(e,.7*g,60,d,c):"small2"==f?b=CalArrowPoint(e,.7*g,45,d,c):"small3"==f&&(b=CalArrowPoint(e,.7*g,30,d,c)):"circle"==e?b=CalArrowPoint(e,1.5*g,45,d,c):"diamond"==e&&("large1"==f?b=CalArrowPoint(e,1.5*g,60,d,c):"large2"==f?b=CalArrowPoint(e,1.5*g,45,d,c):"large3"==f?b=CalArrowPoint(e,1.5*g,30,d,c):"medium1"==f?b=CalArrowPoint(e,g,60,d,c):"medium2"==f?b=CalArrowPoint(e,g,45,d,c):"medium3"==f?b=CalArrowPoint(e,g,30,d,c):"small1"==f?b=CalArrowPoint(e,.7*g,60,d,c):"small2"==f?b=CalArrowPoint(e,.7*g,45,d,c):"small3"==f&&(b=CalArrowPoint(e,.7*g,30,d,c))),"arrow"==e||"line arrow"==e||"stealth arrow"==e||"diamond"==e){for(var k=0;k<b.length;k++)0==k?(ctx.beginPath(),ctx.moveTo(b[k].x,b[k].y)):ctx.lineTo(b[k].x,b[k].y);ctx.closePath(),"arrow"!=e&&"stealth arrow"!=e&&"diamond"!=e||ctx.fill(),ctx.stroke()}else if("circle"==e){var l=(Math.sqrt(2)-1)/3*4,m=new ellipseradius;"large1"==f?(m.rx=g/2*2,m.ry=g/1):"large2"==f?(m.rx=g/2*2,m.ry=g/2):"large3"==f?(m.rx=g/2*2,m.ry=g/3):"medium1"==f?(m.rx=g/2,m.ry=g/1):"medium2"==f?(m.rx=g/2,m.ry=g/2):"medium3"==f?(m.rx=g/2,m.ry=g/3):"small1"==f?(m.rx=g/2/2,m.ry=g/1):"small2"==f?(m.rx=g/2/2,m.ry=g/2):"small3"==f&&(m.rx=g/2/2,m.ry=g/3),ctx.beginPath(),ctx.moveTo(c.x,c.y-m.ry),ctx.bezierCurveTo(c.x+l*m.rx,c.y-m.ry,c.x+m.rx,c.y-l*m.ry,c.x+m.rx,c.y),ctx.bezierCurveTo(c.x+m.rx,c.y+l*m.ry,c.x+l*m.rx,c.y+m.ry,c.x,c.y+m.ry),ctx.bezierCurveTo(c.x-l*m.rx,c.y+m.ry,c.x-m.rx,c.y+l*m.ry,c.x-m.rx,c.y),ctx.bezierCurveTo(c.x-m.rx,c.y-l*m.ry,c.x-l*m.rx,c.y-m.ry,c.x,c.y-m.ry),ctx.closePath(),ctx.fill(),ctx.stroke()}if("none"!=h)if("arrow"==h||"line arrow"==h||"stealth arrow"==h?"large1"==i?b=CalArrowPoint(h,1.5*j,60,c,d):"large2"==i?b=CalArrowPoint(h,1.5*j,45,c,d):"large3"==i?b=CalArrowPoint(h,1.5*j,30,c,d):"medium1"==i?b=CalArrowPoint(h,j,60,c,d):"medium2"==i?b=CalArrowPoint(h,j,45,c,d):"medium3"==i?b=CalArrowPoint(h,j,30,c,d):"small1"==i?b=CalArrowPoint(h,.7*j,60,c,d):"small2"==i?b=CalArrowPoint(h,.7*j,45,c,d):"small3"==i&&(b=CalArrowPoint(h,.7*j,30,c,d)):"circle"==h?b=CalArrowPoint(h,1.5*j,45,c,d):"diamond"==h&&("large1"==i?b=CalArrowPoint(h,1.5*j,60,c,d):"large2"==i?b=CalArrowPoint(h,1.5*j,45,c,d):"large3"==i?b=CalArrowPoint(h,1.5*j,30,c,d):"medium1"==i?b=CalArrowPoint(h,j,60,c,d):"medium2"==i?b=CalArrowPoint(h,j,45,c,d):"medium3"==i?b=CalArrowPoint(h,j,30,c,d):"small1"==i?b=CalArrowPoint(h,.7*j,60,c,d):"small2"==i?b=CalArrowPoint(h,.7*j,45,c,d):"small3"==i&&(b=CalArrowPoint(h,.7*j,30,c,d))),"arrow"==h||"line arrow"==h||"stealth arrow"==h||"diamond"==h){for(var k=0;k<b.length;k++)0==k?(ctx.beginPath(),ctx.moveTo(b[k].x,b[k].y)):ctx.lineTo(b[k].x,b[k].y);ctx.closePath(),"arrow"!=h&&"stealth arrow"!=h&&"diamond"!=h||ctx.fill(),ctx.stroke()}else if("circle"==h){var l=(Math.sqrt(2)-1)/3*4,m=new ellipseradius;"large1"==i?(m.rx=j/2*2,m.ry=j/1):"large2"==i?(m.rx=j/2*2,m.ry=j/2):"large3"==i?(m.rx=j/2*2,m.ry=j/3):"medium1"==i?(m.rx=j/2,m.ry=j/1):"medium2"==i?(m.rx=j/2,m.ry=j/2):"medium3"==i?(m.rx=j/2,m.ry=j/3):"small1"==i?(m.rx=j/2/2,m.ry=j/1):"small2"==i?(m.rx=j/2/2,m.ry=j/2):"small3"==i&&(m.rx=j/2/2,m.ry=j/3),ctx.beginPath(),ctx.moveTo(d.x,d.y-m.ry),ctx.bezierCurveTo(d.x+l*m.rx,d.y-m.ry,d.x+m.rx,d.y-l*m.ry,d.x+m.rx,d.y),ctx.bezierCurveTo(d.x+m.rx,d.y+l*m.ry,d.x+l*m.rx,d.y+m.ry,d.x,d.y+m.ry),ctx.bezierCurveTo(d.x-l*m.rx,d.y+m.ry,d.x-m.rx,d.y+l*m.ry,d.x-m.rx,d.y),ctx.bezierCurveTo(d.x-m.rx,d.y-l*m.ry,d.x-l*m.rx,d.y-m.ry,d.x,d.y-m.ry),ctx.closePath(),ctx.fill(),ctx.stroke()}}else if("polyline"==a.nodename){var b=[],c=new coordinates,n=new coordinates,d=new coordinates,o=new coordinates,e=a.begin_arrow_type,f=a.begin_arrow_span,g=a.begin_arrow_size,h=a.end_arrow_type,i=a.end_arrow_span,j=a.end_arrow_size,p=CreatePath(a.points);if(c.x=p[0].x,c.y=p[0].y,n.x=p[1].x,n.y=p[1].y,d.x=p[p.length-1].x,d.y=p[p.length-1].y,o.x=p[p.length-2].x,o.y=p[p.length-2].y,"none"!=e)if("arrow"==e||"line arrow"==e||"stealth arrow"==e?"large1"==f?b=CalArrowPoint(e,1.5*g,60,n,c):"large2"==f?b=CalArrowPoint(e,1.5*g,45,n,c):"large3"==f?b=CalArrowPoint(e,1.5*g,30,n,c):"medium1"==f?b=CalArrowPoint(e,g,60,n,c):"medium2"==f?b=CalArrowPoint(e,g,45,n,c):"medium3"==f?b=CalArrowPoint(e,g,30,n,c):"small1"==f?b=CalArrowPoint(e,.7*g,60,n,c):"small2"==f?b=CalArrowPoint(e,.7*g,45,n,c):"small3"==f&&(b=CalArrowPoint(e,.7*g,30,n,c)):"circle"==e?b=CalArrowPoint(e,1.5*g,45,n,c):"diamond"==e&&("large1"==f?b=CalArrowPoint(e,1.5*g,60,n,c):"large2"==f?b=CalArrowPoint(e,1.5*g,45,n,c):"large3"==f?b=CalArrowPoint(e,1.5*g,30,n,c):"medium1"==f?b=CalArrowPoint(e,g,60,n,c):"medium2"==f?b=CalArrowPoint(e,g,45,n,c):"medium3"==f?b=CalArrowPoint(e,g,30,n,c):"small1"==f?b=CalArrowPoint(e,.7*g,60,n,c):"small2"==f?b=CalArrowPoint(e,.7*g,45,n,c):"small3"==f&&(b=CalArrowPoint(e,.7*g,30,n,c))),"arrow"==e||"line arrow"==e||"stealth arrow"==e||"diamond"==e){for(var k=0;k<b.length;k++)0==k?(ctx.beginPath(),ctx.moveTo(b[k].x,b[k].y)):ctx.lineTo(b[k].x,b[k].y);ctx.closePath(),"arrow"!=e&&"stealth arrow"!=e&&"diamond"!=e||ctx.fill(),ctx.stroke()}else if("circle"==e){var l=(Math.sqrt(2)-1)/3*4,m=new ellipseradius;"large1"==f?(m.rx=g/2*2,m.ry=g/1):"large2"==f?(m.rx=g/2*2,m.ry=g/2):"large3"==f?(m.rx=g/2*2,m.ry=g/3):"medium1"==f?(m.rx=g/2,m.ry=g/1):"medium2"==f?(m.rx=g/2,m.ry=g/2):"medium3"==f?(m.rx=g/2,m.ry=g/3):"small1"==f?(m.rx=g/2/2,m.ry=g/1):"small2"==f?(m.rx=g/2/2,m.ry=g/2):"small3"==f&&(m.rx=g/2/2,m.ry=g/3),ctx.beginPath(),ctx.moveTo(c.x,c.y-m.ry),ctx.bezierCurveTo(c.x+l*m.rx,c.y-m.ry,c.x+m.rx,c.y-l*m.ry,c.x+m.rx,c.y),ctx.bezierCurveTo(c.x+m.rx,c.y+l*m.ry,c.x+l*m.rx,c.y+m.ry,c.x,c.y+m.ry),ctx.bezierCurveTo(c.x-l*m.rx,c.y+m.ry,c.x-m.rx,c.y+l*m.ry,c.x-m.rx,c.y),ctx.bezierCurveTo(c.x-m.rx,c.y-l*m.ry,c.x-l*m.rx,c.y-m.ry,c.x,c.y-m.ry),ctx.closePath(),ctx.fill(),ctx.stroke()}if("none"!=h)if("arrow"==h||"line arrow"==h||"stealth arrow"==h?"large1"==i?b=CalArrowPoint(h,1.5*j,60,o,d):"large2"==i?b=CalArrowPoint(h,1.5*j,45,o,d):"large3"==i?b=CalArrowPoint(h,1.5*j,30,o,d):"medium1"==i?b=CalArrowPoint(h,j,60,o,d):"medium2"==i?b=CalArrowPoint(h,j,45,o,d):"medium3"==i?b=CalArrowPoint(h,j,30,o,d):"small1"==i?b=CalArrowPoint(h,.7*j,60,o,d):"small2"==i?b=CalArrowPoint(h,.7*j,45,o,d):"small3"==i&&(b=CalArrowPoint(h,.7*j,30,o,d)):"circle"==h?b=CalArrowPoint(h,1.5*j,45,o,d):"diamond"==h&&("large1"==i?b=CalArrowPoint(h,1.5*j,60,o,d):"large2"==i?b=CalArrowPoint(h,1.5*j,45,o,d):"large3"==i?b=CalArrowPoint(h,1.5*j,30,o,d):"medium1"==i?b=CalArrowPoint(h,j,60,o,d):"medium2"==i?b=CalArrowPoint(h,j,45,o,d):"medium3"==i?b=CalArrowPoint(h,j,30,o,d):"small1"==i?b=CalArrowPoint(h,.7*j,60,o,d):"small2"==i?b=CalArrowPoint(h,.7*j,45,o,d):"small3"==i&&(b=CalArrowPoint(h,.7*j,30,o,d))),"arrow"==h||"line arrow"==h||"stealth arrow"==h||"diamond"==h){for(var k=0;k<b.length;k++)0==k?(ctx.beginPath(),ctx.moveTo(b[k].x,b[k].y)):ctx.lineTo(b[k].x,b[k].y);ctx.closePath(),"arrow"!=h&&"stealth arrow"!=h&&"diamond"!=h||ctx.fill(),ctx.stroke()}else if("circle"==h){var l=(Math.sqrt(2)-1)/3*4,m=new ellipseradius;"large1"==i?(m.rx=j/2*2,m.ry=j/1):"large2"==i?(m.rx=j/2*2,m.ry=j/2):"large3"==i?(m.rx=j/2*2,m.ry=j/3):"medium1"==i?(m.rx=j/2,m.ry=j/1):"medium2"==i?(m.rx=j/2,m.ry=j/2):"medium3"==i?(m.rx=j/2,m.ry=j/3):"small1"==i?(m.rx=j/2/2,m.ry=j/1):"small2"==i?(m.rx=j/2/2,m.ry=j/2):"small3"==i&&(m.rx=j/2/2,m.ry=j/3),ctx.beginPath(),ctx.moveTo(d.x,d.y-m.ry),ctx.bezierCurveTo(d.x+l*m.rx,d.y-m.ry,d.x+m.rx,d.y-l*m.ry,d.x+m.rx,d.y),ctx.bezierCurveTo(d.x+m.rx,d.y+l*m.ry,d.x+l*m.rx,d.y+m.ry,d.x,d.y+m.ry),ctx.bezierCurveTo(d.x-l*m.rx,d.y+m.ry,d.x-m.rx,d.y+l*m.ry,d.x-m.rx,d.y),ctx.bezierCurveTo(d.x-m.rx,d.y-l*m.ry,d.x-l*m.rx,d.y-m.ry,d.x,d.y-m.ry),ctx.closePath(),ctx.fill(),ctx.stroke()}}}function CalArrowPoint(a,b,c,d,e){var j,m,f=[],g=new coordinates,h=new coordinates,i=new coordinates,k=DegreeToRadian(c/2),l=b*Math.tan(k);if(e.x-d.x!=0?(j=(e.y-d.y)/(e.x-d.x),m=Math.atan(j),e.x-d.x<0&&(m+=Math.PI)):m=e.y-d.y<0?-Math.PI/2:Math.PI/2,"arrow"==a||"line arrow"==a||"stealth arrow"==a){var n=new coordinates;n.x=e.x-3*b/5*Math.cos(m),n.y=e.y-3*b/5*Math.sin(m),g.x=e.x-b*Math.cos(m),g.y=e.y-b*Math.sin(m),h.x=g.x-l*Math.cos(m-Math.PI/2),h.y=g.y-l*Math.sin(m-Math.PI/2),i.x=2*g.x-h.x,i.y=2*g.y-h.y,f.push(h),f.push(e),f.push(i),"stealth arrow"==a&&f.push(n)}else if("circle"==a)f.push(e);else if("diamond"==a){var o=new coordinates,p=new coordinates,q=new coordinates,r=new coordinates;q.x=e.x-b/2*Math.cos(m),180==RadianToDegree(m)?q.y=e.y:q.y=e.y-b/2*Math.sin(m),r.x=2*e.x-q.x,r.y=2*e.y-q.y,o.x=e.x-l/2*Math.cos(m-Math.PI/2),o.y=e.y-l/2*Math.sin(m-Math.PI/2),p.x=2*e.x-o.x,p.y=2*e.y-o.y,f.push(o),f.push(r),f.push(p),f.push(q)}return f}function DegreeToRadian(a){return a*(Math.PI/180)}function RadianToDegree(a){return a*(180/Math.PI)}function onmousewheel(a){var b=window.event||a,c=b.detail?-120*b.detail:b.wheelDelta,d=new coordinates;d.x=(m_worldPos.x-event.offsetX)/m_wordldScale.x,d.y=(m_worldPos.y-event.offsetY)/m_wordldScale.y;var e=1;c>0?e=1.1:c<0&&(e=.9),m_wordldScale.x*=e,m_wordldScale.y=m_wordldScale.x,m_worldPos.x=d.x*m_wordldScale.x+event.offsetX,m_worldPos.y=d.y*m_wordldScale.y+event.offsetY,Draw_All(window[root_obj_id])}function SetGrident(a,b){if(-1==b.fill.indexOf("rgb(")){var c=b.fill;c=c.replace("url(#",""),c=c.replace(")","");for(var d=0;d<GridentList.length;d++)if(c==GridentList[d].id){var f,e=GridentList[d],g=parseFloat(a.width()),h=parseFloat(a.height());if(g/=m_wordldScale.x,h/=m_wordldScale.y,"line"==e.type){var i=g*(.01*e.x1),j=g*(.01*e.x2),k=h*(.01*e.y1),l=h*(.01*e.y2),m=new enuPoint(i,k);m=GetRotatePoint(b,m);var n=new enuPoint(j,l);n=GetRotatePoint(b,n),f=ctx.createLinearGradient(m.x,m.y,n.x,n.y);for(var d=0;d<e.stop.length;d++){var o=e.stop[d],p=o.offsets,q=o.stopStyle;f.addColorStop(p,q)}}else{var r=g*(.01*e.cx),s=h*(.01*e.cy),t=g*(.01*e.fx),u=h*(.01*e.fy),v=0;v=g>h?g*(.01*e.r):h*(.01*e.r);var m=new enuPoint(r,s);m=GetRotatePoint(b,m);var n=new enuPoint(t,u);n=GetRotatePoint(b,n),f=ctx.createRadialGradient(m.x,m.y,0,n.x,n.y,v);for(var d=0;d<e.stop.length;d++){var o=e.stop[d],p=o.offsets,q=o.stopStyle;f.addColorStop(p,q)}}ctx.fillStyle=f}}}function DegreeToRadian(a){return a*(3.14159265359/180)}function GetRotatePoint(a,b){var c=a.rotate,d=new enuPoint(a.center_x,a.center_y),e=DegreeToRadian(c),f=new enuPoint(0,0);return e=a.scale_x<0&&pNode.scale_y<0?-e:a.scale_x<0||a.scale_y<0?e:-e,f.x=(b.x-d.x)*Math.cos(e)-(b.y-d.y)*Math.sin(e),f.y=(b.x-d.x)*Math.sin(e)+(b.y-d.y)*Math.cos(e),f.x=f.x+d.x,f.y=f.y+d.y,f}var InitMt,BoundBoxs=[];trim=function(a){return a.replace(/^\s+|\s+$/g,"")},compressSpaces=function(a){return a.replace(/[\s\r\t\n]+/gm," ")},enuPoint=function(a,b){this.x=a,this.y=b},CreatePoint=function(a){var b=ToNumberArray(a);return new enuPoint(b[0],b[1])},m_worldPos=function(a,b){this.x=a,this.y=b},m_mouseOldPos=function(a,b){this.x=a,this.y=b},m_mouseStartPos=function(a,b){this.x=a,this.y=b};var m_svgmoveflag=!1;m_wordldScale=function(a,b){this.x=a,this.y=b};var m_bAutoscale=!0;BoundingBox=function(a,b,c,d){this.x1=Number.NaN,this.y1=Number.NaN,this.x2=Number.NaN,this.y2=Number.NaN,this.x=function(){return this.x1},this.y=function(){return this.y1},this.width=function(){return this.x2-this.x1},this.height=function(){return this.y2-this.y1},this.addPoint=function(a,b){null!=a&&((isNaN(this.x1)||isNaN(this.x2))&&(this.x1=a,this.x2=a),a<this.x1&&(this.x1=a),a>this.x2&&(this.x2=a)),null!=b&&((isNaN(this.y1)||isNaN(this.y2))&&(this.y1=b,this.y2=b),b<this.y1&&(this.y1=b),b>this.y2&&(this.y2=b))},this.addX=function(a){this.addPoint(a,null)},this.addY=function(a){this.addPoint(null,a)},this.addBoundingBox=function(a){this.addPoint(a.x1,a.y1),this.addPoint(a.x2,a.y2)},this.addQuadraticCurve=function(a,b,c,d,e,f){var g=a+2/3*(c-a),h=b+2/3*(d-b),i=g+1/3*(e-a),j=h+1/3*(f-b);this.addBezierCurve(a,b,g,i,h,j,e,f)},this.addBezierCurve=function(a,b,c,d,e,f,g,h){var j=[a,b],k=[c,d],l=[e,f],m=[g,h];for(this.addPoint(j[0],j[1]),this.addPoint(m[0],m[1]),i=0;i<=1;i++){var n=function(a){return Math.pow(1-a,3)*j[i]+3*Math.pow(1-a,2)*a*k[i]+3*(1-a)*Math.pow(a,2)*l[i]+Math.pow(a,3)*m[i]},o=6*j[i]-12*k[i]+6*l[i],p=-3*j[i]+9*k[i]-9*l[i]+3*m[i],q=3*k[i]-3*j[i];if(0!=p){var s=Math.pow(o,2)-4*q*p;if(!(s<0)){var t=(-o+Math.sqrt(s))/(2*p);0<t&&t<1&&(0==i&&this.addX(n(t)),1==i&&this.addY(n(t)));var u=(-o-Math.sqrt(s))/(2*p);0<u&&u<1&&(0==i&&this.addX(n(u)),1==i&&this.addY(n(u)))}}else{if(0==o)continue;var r=-q/o;0<r&&r<1&&(0==i&&this.addX(n(r)),1==i&&this.addY(n(r)))}}},this.isPointInBox=function(a,b){return this.x1<=a&&a<=this.x2&&this.y1<=b&&b<=this.y2},this.addPoint(a,b),this.addPoint(c,d)};
function gap(){this.left=0,this.right=0,this.top=0,this.bottom=0,this.row=0,this.symboltotext=0,this.series=0}function data_point(a,b){this.x,this.y,void 0!=a&&(this.x=a),void 0!=b&&(this.y=b)}function CreateVariable(a){if(-1!=a.indexOf("@"))if(a.split(".").length>1){var c,b=a.split("."),d="";for(var e in b)if(0==e){var f=b[e].substring(1,b[e].length);window[f]?c=window[f]:(window[f]=new Object,c=window[f]),d+=f}else e<b.length-1?(c[b[e]]=new Object,c=c[b[e]]):e==b.length-1&&(c[b[e]]=0)}else if(a.indexOf("@")>=0){var f=a.substring(1,a.length);window[f]=0}}function VariableValueReturn(variable){var variable_value;if(variable.split(".").length>1){var values=variable.split(".");for(var i in values)0==i?values[i].indexOf("@")>=0?eval_text='window["'+values[i].substring(1,values[i].length)+'"]':eval_text='window["'+values[i]+'"]':eval_text=eval_text+'["'+values[i]+'"]';variable_value=eval(eval_text)}else variable&&(variable_value=variable.indexOf("@")>=0?window[variable.substring(1,variable.length)]:window[variable]);return variable_value}function gethistoricaldata(a,b,c,d){var e=new XMLHttpRequest,g="tagid="+a+"&duration="+b+"&endtime="+c;e.open("POST","gethistoricaldata",!1),e.setRequestHeader("Content-Type","application/x-www-form-urlencoded;charset=UTF-8"),e.setRequestHeader("Cache-Control","no-cache, must-revalidate"),e.setRequestHeader("Pragma","no-cache"),e.send(g);var h=e.responseText,i=JSON.parse(h);if("OK"==i.RESULT){var j=i.VALUES;if(j.length>0)if("SIM"==i.TIME_FORMAT)for(var k in j){var l=new Date(j[k].TIME).valueOf(),m=new Date("1601-01-01 00:00:00.000").valueOf(),n=l-m,o=parseFloat(Number(j[k].VALUE)),p=new data_point(n,o);d.unshift(p)}else if("SYS"==i.TIME_FORMAT)for(var k in j){var n=new Date(j[k].TIME).valueOf(),o=parseFloat(Number(j[k].VALUE)),p=new data_point(n,o);d.unshift(p)}}else console.log("gethistoricaldata: 받아오기 에러")}function SeriesDataUpdate(a){var b=a.trendSeriesList;if("on"==a.trend_flow){a.xview_max=time_value,a.xview_min=time_value-1e3*a.duration;for(var c in b){var d=new data_point(0,0);d.x=time_value,d.y=VariableValueReturn(b[c].variable),b[c].series_data.push(d)}}else a.trend_flow;for(var c in b)if(b[c].data!=b[c].olddata){b[c].olddata=b[c].data;for(var e=b[c].data.split(" "),f=[],c=0;c<e.length;c++){f=e[c].split(",");var g=new data_point(Number(f[0]),Number(f[1]));this.series_data.push(g)}}}function SeriesDataInitialize(a){var b=a.trendSeriesList;if("on"==a.trend_flow)for(var c in b)b[c].data=[],b[c].series_data=[]}function CreateTrendObj(a){function c(a,b){for(var c=b.firstChild,d=0;d<b.childNodes.length;d++){if("script"==c.nodeName?CreateFunction(c.textContent,a):"pg-trendtitle"==c.nodeName?(a[c.id]=new CreateTitleObj(c),a[c.id].parentObj=a,a.appendChild(a[c.id])):"pg-trendlegend"==c.nodeName?(a[c.id]=new CreateLegendObj(c),a[c.id].parentObj=a,a.appendChild(a[c.id])):"pg-trendxaxis"==c.nodeName?(a[c.id]=new CreateXaxisObj(c),a[c.id].parentObj=a,a.appendChild(a[c.id])):"pg-trendyaxis"==c.nodeName?(a[c.id]=new CreateYaxisObj(c),a[c.id].parentObj=a,a.appendChild(a[c.id])):"pg-trendgraph"==c.nodeName?(a[c.id]=new CreateGraphObj(c),a[c.id].parentObj=a,a.appendChild(a[c.id])):"pg-trendseries"==c.nodeName&&(a[c.id]=new CreateSeriesObj(c),a[c.id].parentObj=a,a.appendChild(a[c.id]),a.trendSeriesList.push(a[c.id])),!c.nextSibling){sibling_update(a);break}c=c.nextSibling}}if(this.nodename=a.nodeName,this.xmlns=a.getAttribute("xmlns"),this.xlink=a.getAttribute("xmlns:xlink"),this.id=a.getAttribute("id"),this.childNodes=[],this.trendSeriesList=[],this.prevSibling,this.nextSibling,this.parentObj,this.parentNode,this.ownnode=a.cloneNode(!1),this.appendChild=function(a){this.childNodes.push(a),sibling_update(this)},this.removeChild=function(a){for(var b=0;b<childNodes.length;b++)if(childNodes[b].id==a){this.childNodes.splice(b,1);break}sibling_update(this)},this.visibility=a.getAttribute("visibility"),this.stroke=a.getAttribute("stroke"),this.stroke_opacity=parseFloat(a.getAttribute("stroke-opacity")),this.stroke_width=parseFloat(a.getAttribute("stroke-width")),this.stroke_dasharray=a.getAttribute("stroke-dasharray"),this.stroke_linecap=a.getAttribute("stroke-linecap"),this.stroke_linejoin=a.getAttribute("stroke-linejoin"),this.x=parseFloat(a.getAttribute("x")),this.y=parseFloat(a.getAttribute("y")),this.width=parseFloat(a.getAttribute("width")),this.height=parseFloat(a.getAttribute("height")),this.style=a.getAttribute("style"),this.transform=a.getAttribute("transform"),this.transform){var b=this.transform.split("(");this.translate_x=parseFloat(Number(b[1].substring(0,b[1].indexOf(",")))),this.translate_y=parseFloat(Number(b[1].substring(b[1].indexOf(",")+1,b[1].indexOf(")")))),this.rotate=parseFloat(Number(b[2].substring(0,b[2].indexOf(")")))),this.scale_x=parseFloat(Number(b[3].substring(0,b[3].indexOf(",")))),this.scale_y=parseFloat(Number(b[3].substring(b[3].indexOf(",")+1,b[3].indexOf(")")))),this.center_x=parseFloat(Number(a.getAttribute("pg-xcenter"))),this.center_y=parseFloat(Number(a.getAttribute("pg-ycenter")))}else this.translate_x=0,this.translate_y=0,this.rotate=0,this.scale_x=1,this.scale_y=1,this.center_x=0,this.center_y=0;this.fill=a.getAttribute("fill"),this.fill_opacity=parseFloat(Number(a.getAttribute("fill-opacity"))),this.rx=parseFloat(Number(a.getAttribute("rx"))),this.ry=parseFloat(Number(a.getAttribute("ry"))),this.trend_flow=a.getAttribute("trend-flow"),this.xview_min=parseFloat(Number(a.getAttribute("xview-min"))),this.xview_max=parseFloat(Number(a.getAttribute("xview-max"))),this.yview_min=parseFloat(Number(a.getAttribute("yview-min"))),this.yview_max=parseFloat(Number(a.getAttribute("yview-max"))),this.duration=parseFloat(Number(a.getAttribute("duration"))),this.auto_scale=a.getAttribute("auto-scale"),this.direction=a.getAttribute("direction"),this.direction_y=a.getAttribute("direction-y"),void 0==this.direction_y&&(this.direction_y="down-top"),this.individual_yaxis=a.getAttribute("individual-yaxis"),this.series_yaxis=a.getAttribute("series-yaxis"),this.ruler=a.getAttribute("ruler"),this.title_visible=a.getAttribute("title-visible"),this.legend_visible=a.getAttribute("legend-visible"),this.grid_visible=a.getAttribute("grid-visible"),this.xaxis_visible=a.getAttribute("xaxis-visible"),this.yaxis_visible=a.getAttribute("yaxis-visible"),this.band_visible=a.getAttribute("band-visible"),this.highlimit_band=parseFloat(Number(a.getAttribute("highlimit-band"))),this.band_high_fill=a.getAttribute("band-high-fill"),this.band_high_opacity=parseFloat(Number(a.getAttribute("band-high-opacity"))),this.band_high_width=parseFloat(Number(a.getAttribute("band-high-width"))),this.band_high_dasharray=a.getAttribute("band-high-dasharray"),this.lowlimit_band=parseFloat(Number(a.getAttribute("lowlimit-band"))),this.band_low_fill=a.getAttribute("band-low-fill"),this.band_low_opacity=parseFloat(Number(a.getAttribute("band-low-opacity"))),this.band_low_width=parseFloat(Number(a.getAttribute("band-low-width"))),this.band_low_dasharray=a.getAttribute("band-low-dasharray"),this.interpolator=a.getAttribute("interpolator"),this.last_xaxis_mainscale=0,c(this,a);for(var d=this.trendSeriesList[0];d;)d&&gethistoricaldata(d.variable,1e3*this.duration,0,d.series_data),d=d.nextSibling}function CreateTitleObj(a){if(this.nodename=a.nodeName,this.xmlns=a.getAttribute("xmlns"),this.xlink=a.getAttribute("xmlns:xlink"),this.id=a.getAttribute("id"),this.childNodes=[],this.prevSibling,this.nextSibling,this.parentObj,this.parentNode,this.ownnode=a.cloneNode(!1),this.appendChild=function(a){this.childNodes.push(a),sibling_update(this)},this.removeChild=function(a){for(var b=0;b<childNodes.length;b++)if(childNodes[b].id==a){this.childNodes.splice(b,1);break}sibling_update(this)},this.visibility=a.getAttribute("visibility"),this.stroke=a.getAttribute("stroke"),this.stroke_opacity=parseFloat(a.getAttribute("stroke-opacity")),this.stroke_width=parseFloat(a.getAttribute("stroke-width")),this.stroke_dasharray=a.getAttribute("stroke-dasharray"),this.stroke_linecap=a.getAttribute("stroke-linecap"),this.stroke_linejoin=a.getAttribute("stroke-linejoin"),this.x=parseFloat(a.getAttribute("x")),this.y=parseFloat(a.getAttribute("y")),this.width=parseFloat(a.getAttribute("width")),this.height=parseFloat(a.getAttribute("height")),this.style=a.getAttribute("style"),this.transform=a.getAttribute("transform"),this.transform){var b=this.transform.split("(");this.translate_x=parseFloat(Number(b[1].substring(0,b[1].indexOf(",")))),this.translate_y=parseFloat(Number(b[1].substring(b[1].indexOf(",")+1,b[1].indexOf(")")))),this.rotate=parseFloat(Number(b[2].substring(0,b[2].indexOf(")")))),this.scale_x=parseFloat(Number(b[3].substring(0,b[3].indexOf(",")))),this.scale_y=parseFloat(Number(b[3].substring(b[3].indexOf(",")+1,b[3].indexOf(")")))),this.center_x=parseFloat(Number(a.getAttribute("pg-xcenter"))),this.center_y=parseFloat(Number(a.getAttribute("pg-ycenter")))}else this.translate_x=0,this.translate_y=0,this.rotate=0,this.scale_x=1,this.scale_y=1,this.center_x=0,this.center_y=0;this.baseline_shift=parseFloat(Number(a.getAttribute("baseline-shift"))),this.dx=parseFloat(Number(a.getAttribute("dx"))),this.dy=parseFloat(Number(a.getAttribute("dy"))),this.rx=parseFloat(Number(a.getAttribute("rx"))),this.ry=parseFloat(Number(a.getAttribute("ry"))),this.text_height=parseFloat(Number(a.getAttribute("text-height"))),this.text_anchor=a.getAttribute("text-anchor"),void 0==a.getAttribute("text-anchor")&&(this.text_anchor="middle"),this.gap=new gap,this.gap.left=parseFloat(Number(a.getAttribute("gapleft"))),this.gap.right=parseFloat(Number(a.getAttribute("gapright"))),this.gap.top=parseFloat(Number(a.getAttribute("gaptop"))),this.gap.bottom=parseFloat(Number(a.getAttribute("gapbottom"))),this.fill=a.getAttribute("fill"),this.fill_opacity=parseFloat(Number(a.getAttribute("fill-opacity"))),this.position=a.getAttribute("position"),this.title=a.getAttribute("title"),this.font_color=a.getAttribute("font-color"),this.font_family=a.getAttribute("font-family"),this.font_size=parseFloat(Number(a.getAttribute("font-size"))),this.font_weight=a.getAttribute("font-weight"),this.font_style=a.getAttribute("font-style");for(var c=a.firstChild,d=0;d<a.childNodes.length&&("script"==c.nodeName&&("ie"==current_browser?CreateFunction(c.text,this):CreateFunction(c.textContent,this)),c.nextSibling);d++)c=c.nextSibling}function CreateLegendObj(a){if(this.nodename=a.nodeName,this.xmlns=a.getAttribute("xmlns"),this.xlink=a.getAttribute("xmlns:xlink"),this.id=a.getAttribute("id"),this.childNodes=[],this.prevSibling,this.nextSibling,this.parentObj,this.parentNode,this.ownnode=a.cloneNode(!1),this.appendChild=function(a){this.childNodes.push(a),sibling_update(this)},this.removeChild=function(a){for(var b=0;b<childNodes.length;b++)if(childNodes[b].id==a){this.childNodes.splice(b,1);break}sibling_update(this)},this.visibility=a.getAttribute("visibility"),this.stroke=a.getAttribute("stroke"),this.stroke_opacity=parseFloat(a.getAttribute("stroke-opacity")),this.stroke_width=parseFloat(a.getAttribute("stroke-width")),this.stroke_dasharray=a.getAttribute("stroke-dasharray"),this.stroke_linecap=a.getAttribute("stroke-linecap"),this.stroke_linejoin=a.getAttribute("stroke-linejoin"),this.rx=parseFloat(Number(a.getAttribute("rx"))),this.ry=parseFloat(Number(a.getAttribute("ry"))),this.x=parseFloat(a.getAttribute("x")),this.y=parseFloat(a.getAttribute("y")),this.width=parseFloat(a.getAttribute("width")),this.height=parseFloat(a.getAttribute("height")),this.style=a.getAttribute("style"),this.transform=a.getAttribute("transform"),this.transform){var b=this.transform.split("(");this.translate_x=parseFloat(Number(b[1].substring(0,b[1].indexOf(",")))),this.translate_y=parseFloat(Number(b[1].substring(b[1].indexOf(",")+1,b[1].indexOf(")")))),this.rotate=parseFloat(Number(b[2].substring(0,b[2].indexOf(")")))),this.scale_x=parseFloat(Number(b[3].substring(0,b[3].indexOf(",")))),this.scale_y=parseFloat(Number(b[3].substring(b[3].indexOf(",")+1,b[3].indexOf(")")))),this.center_x=parseFloat(Number(a.getAttribute("pg-xcenter"))),this.center_y=parseFloat(Number(a.getAttribute("pg-ycenter")))}else this.translate_x=0,this.translate_y=0,this.rotate=0,this.scale_x=1,this.scale_y=1,this.center_x=0,this.center_y=0;this.fill=a.getAttribute("fill"),this.fill_opacity=parseFloat(Number(a.getAttribute("fill-opacity"))),this.position=a.getAttribute("position"),this.gap=new gap,this.gap.left=parseFloat(Number(a.getAttribute("gap-left"))),this.gap.right=parseFloat(Number(a.getAttribute("gap-right"))),this.gap.top=parseFloat(Number(a.getAttribute("gap-top"))),this.gap.bottom=parseFloat(Number(a.getAttribute("gap-bottom"))),this.gap.row=parseFloat(Number(a.getAttribute("gap-row"))),this.gap.symbol_text=parseFloat(Number(a.getAttribute("gap-symbol-text"))),this.gap.series=parseFloat(Number(a.getAttribute("gap-series"))),this.symbol_size=parseFloat(Number(a.getAttribute("symbol-size"))),this.font_color=a.getAttribute("font-color"),this.font_family=a.getAttribute("font-family"),this.font_size=parseFloat(Number(a.getAttribute("font-size"))),this.angle=parseFloat(Number(a.getAttribute("angle"))),this.font_style=a.getAttribute("font-style"),this.font_weight=a.getAttribute("font-weight"),this.font_height=parseFloat(Number(a.getAttribute("font-height"))),this.font_highest_width=parseFloat(Number(a.getAttribute("font-highest-width"))),this.font_highest_height=parseFloat(Number(a.getAttribute("font-highest-height")));for(var c=a.firstChild,d=0;d<a.childNodes.length&&("script"==c.nodeName&&("ie"==current_browser?CreateFunction(c.text,this):CreateFunction(c.textContent,this)),c.nextSibling);d++)c=c.nextSibling}function CreateXaxisObj(a){if(this.nodename=a.nodeName,this.xmlns=a.getAttribute("xmlns"),this.xlink=a.getAttribute("xmlns:xlink"),this.id=a.getAttribute("id"),this.childNodes=[],this.prevSibling,this.nextSibling,this.parentObj,this.parentNode,this.ownnode=a.cloneNode(!1),this.appendChild=function(a){this.childNodes.push(a),sibling_update(this)},this.removeChild=function(a){for(var b=0;b<childNodes.length;b++)if(childNodes[b].id==a){this.childNodes.splice(b,1);break}sibling_update(this)},this.visibility=a.getAttribute("visibility"),this.stroke=a.getAttribute("stroke"),this.stroke_opacity=parseFloat(a.getAttribute("stroke-opacity")),this.stroke_width=parseFloat(a.getAttribute("stroke-width")),this.stroke_dasharray=a.getAttribute("stroke-dasharray"),this.stroke_linecap=a.getAttribute("stroke-linecap"),this.stroke_linejoin=a.getAttribute("stroke-linejoin"),this.x=parseFloat(a.getAttribute("x")),this.y=parseFloat(a.getAttribute("y")),this.width=parseFloat(a.getAttribute("width")),this.height=parseFloat(a.getAttribute("height")),this.style=a.getAttribute("style"),this.transform=a.getAttribute("transform"),this.transform){var b=this.transform.split("(");this.translate_x=parseFloat(Number(b[1].substring(0,b[1].indexOf(",")))),this.translate_y=parseFloat(Number(b[1].substring(b[1].indexOf(",")+1,b[1].indexOf(")")))),this.rotate=parseFloat(Number(b[2].substring(0,b[2].indexOf(")")))),this.scale_x=parseFloat(Number(b[3].substring(0,b[3].indexOf(",")))),this.scale_y=parseFloat(Number(b[3].substring(b[3].indexOf(",")+1,b[3].indexOf(")")))),this.center_x=parseFloat(Number(a.getAttribute("pg-xcenter"))),this.center_y=parseFloat(Number(a.getAttribute("pg-ycenter")))}else this.translate_x=0,this.translate_y=0,this.rotate=0,this.scale_x=1,this.scale_y=1,this.center_x=0,this.center_y=0;this.fill=a.getAttribute("fill"),this.fill_opacity=parseFloat(Number(a.getAttribute("fill-opacity"))),this.position=a.getAttribute("position"),this.label_visible=a.getAttribute("label-visible"),this.mainscale=a.getAttribute("mainscale"),this.scale_length=parseFloat(Number(a.getAttribute("scale-length"))),this.subscale=a.getAttribute("subscale"),this.subscale_length=parseFloat(Number(a.getAttribute("subscale-length"))),this.tick=parseFloat(Number(a.getAttribute("tick"))),this.font_family=a.getAttribute("font-family"),this.label_format=a.getAttribute("label-format"),this.font_color=a.getAttribute("font-color"),this.font_size=parseFloat(Number(a.getAttribute("font-size"))),this.font_style=a.getAttribute("font-style"),this.font_weight=a.getAttribute("font-weight"),this.font_width=parseFloat(Number(a.getAttribute("font-width"))),this.font_height=parseFloat(Number(a.getAttribute("font-height"))),this.decimal_point=parseFloat(Number(a.getAttribute("decimal-point"))),this.unit_visible=a.getAttribute("unit-visible"),this.unit=a.getAttribute("unit"),this.xaxislist=[];for(var c=a.firstChild,d=0;d<a.childNodes.length&&("script"==c.nodeName&&("ie"==current_browser?CreateFunction(c.text,this):CreateFunction(c.textContent,this)),c.nextSibling);d++)c=c.nextSibling}function CreateYaxisObj(a){if(this.nodename=a.nodeName,this.xmlns=a.getAttribute("xmlns"),this.xlink=a.getAttribute("xmlns:xlink"),this.id=a.getAttribute("id"),this.childNodes=[],this.prevSibling,this.nextSibling,this.parentObj,this.parentNode,this.ownnode=a.cloneNode(!1),this.appendChild=function(a){this.childNodes.push(a),sibling_update(this)},this.removeChild=function(a){for(var b=0;b<childNodes.length;b++)if(childNodes[b].id==a){this.childNodes.splice(b,1);break}sibling_update(this)},this.visibility=a.getAttribute("visibility"),this.stroke=a.getAttribute("stroke"),this.stroke_opacity=parseFloat(a.getAttribute("stroke-opacity")),this.stroke_width=parseFloat(a.getAttribute("stroke-width")),this.stroke_dasharray=a.getAttribute("stroke-dasharray"),this.stroke_linecap=a.getAttribute("stroke-linecap"),this.stroke_linejoin=a.getAttribute("stroke-linejoin"),this.x=parseFloat(a.getAttribute("x")),this.y=parseFloat(a.getAttribute("y")),this.width=parseFloat(a.getAttribute("width")),this.height=parseFloat(a.getAttribute("height")),this.style=a.getAttribute("style"),this.transform=a.getAttribute("transform"),this.transform){var b=this.transform.split("(");this.translate_x=parseFloat(Number(b[1].substring(0,b[1].indexOf(",")))),this.translate_y=parseFloat(Number(b[1].substring(b[1].indexOf(",")+1,b[1].indexOf(")")))),this.rotate=parseFloat(Number(b[2].substring(0,b[2].indexOf(")")))),this.scale_x=parseFloat(Number(b[3].substring(0,b[3].indexOf(",")))),this.scale_y=parseFloat(Number(b[3].substring(b[3].indexOf(",")+1,b[3].indexOf(")")))),this.center_x=parseFloat(Number(a.getAttribute("pg-xcenter"))),this.center_y=parseFloat(Number(a.getAttribute("pg-ycenter")))}else this.translate_x=0,this.translate_y=0,this.rotate=0,this.scale_x=1,this.scale_y=1,this.center_x=0,this.center_y=0;this.fill=a.getAttribute("fill"),this.fill_opacity=parseFloat(Number(a.getAttribute("fill-opacity"))),this.position=a.getAttribute("position"),this.label_visible=a.getAttribute("label-visible"),this.mainscale=a.getAttribute("mainscale"),this.scale_length=parseFloat(Number(a.getAttribute("scale-length"))),this.subscale=a.getAttribute("subscale"),this.subscale_length=parseFloat(Number(a.getAttribute("subscale-length"))),this.tick=parseFloat(Number(a.getAttribute("tick"))),this.font_family=a.getAttribute("font-family"),this.label_format=a.getAttribute("label-format"),this.font_color=a.getAttribute("font-color"),this.font_size=parseFloat(Number(a.getAttribute("font-size"))),this.font_style=a.getAttribute("font-style"),this.font_weight=a.getAttribute("font-weight"),this.font_width=parseFloat(Number(a.getAttribute("font-width"))),this.font_height=parseFloat(Number(a.getAttribute("font-height"))),this.decimal_point=parseFloat(Number(a.getAttribute("decimal-point"))),this.unit_visible=a.getAttribute("unit-visible"),this.unit=a.getAttribute("unit"),this.yaxislist=[];for(var c=a.firstChild,d=0;d<a.childNodes.length&&("script"==c.nodeName&&("ie"==current_browser?CreateFunction(c.text,this):CreateFunction(c.textContent,this)),c.nextSibling);d++)c=c.nextSibling}function CreateGraphObj(a){if(this.nodename=a.nodeName,this.xmlns=a.getAttribute("xmlns"),this.xlink=a.getAttribute("xmlns:xlink"),this.id=a.getAttribute("id"),this.childNodes=[],this.prevSibling,this.nextSibling,this.parentObj,this.parentNode,this.ownnode=a.cloneNode(!1),this.appendChild=function(a){this.childNodes.push(a),sibling_update(this)},this.removeChild=function(a){for(var b=0;b<childNodes.length;b++)if(childNodes[b].id==a){this.childNodes.splice(b,1);break}sibling_update(this)},this.visibility=a.getAttribute("visibility"),this.stroke=a.getAttribute("stroke"),this.stroke_opacity=parseFloat(a.getAttribute("stroke-opacity")),this.stroke_width=parseFloat(a.getAttribute("stroke-width")),this.stroke_dasharray=a.getAttribute("stroke-dasharray"),this.stroke_linecap=a.getAttribute("stroke-linecap"),this.stroke_linejoin=a.getAttribute("stroke-linejoin"),this.x=parseFloat(a.getAttribute("x")),this.y=parseFloat(a.getAttribute("y")),this.width=parseFloat(a.getAttribute("width")),this.height=parseFloat(a.getAttribute("height")),this.style=a.getAttribute("style"),this.transform=a.getAttribute("transform"),this.transform){var b=this.transform.split("(");this.translate_x=parseFloat(Number(b[1].substring(0,b[1].indexOf(",")))),this.translate_y=parseFloat(Number(b[1].substring(b[1].indexOf(",")+1,b[1].indexOf(")")))),this.rotate=parseFloat(Number(b[2].substring(0,b[2].indexOf(")")))),this.scale_x=parseFloat(Number(b[3].substring(0,b[3].indexOf(",")))),this.scale_y=parseFloat(Number(b[3].substring(b[3].indexOf(",")+1,b[3].indexOf(")")))),this.center_x=parseFloat(Number(a.getAttribute("pg-xcenter"))),this.center_y=parseFloat(Number(a.getAttribute("pg-ycenter")))}else this.translate_x=0,this.translate_y=0,this.rotate=0,this.scale_x=1,this.scale_y=1,this.center_x=0,this.center_y=0;this.fill=a.getAttribute("fill"),this.fill_opacity=parseFloat(Number(a.getAttribute("fill-opacity"))),this.xaxis_count=parseFloat(Number(a.getAttribute("xaxis-count"))),this.yaxis_count=parseFloat(Number(a.getAttribute("yaxis-count"))),this.grid_stroke=a.getAttribute("grid-stroke"),this.grid_stroke_opacity=parseFloat(Number(a.getAttribute("grid-stroke-opacity"))),this.grid_stroke_width=parseFloat(Number(a.getAttribute("grid-stroke-width"))),this.grid_stroke_dasharray=a.getAttribute("grid-stroke-dasharray"),this.horizontal=a.getAttribute("series-scale"),this.vertical=a.getAttribute("series-scale");for(var c=a.firstChild,d=0;d<a.childNodes.length&&("script"==c.nodeName&&("ie"==current_browser?CreateFunction(c.text,this):CreateFunction(c.textContent,this)),c.nextSibling);d++)c=c.nextSibling}function CreateSeriesObj(a){if(this.nodename=a.nodeName,this.xmlns=a.getAttribute("xmlns"),this.xlink=a.getAttribute("xmlns:xlink"),this.id=a.getAttribute("id"),this.childNodes=[],this.prevSibling,this.nextSibling,this.parentObj,this.parentNode,this.ownnode=a.cloneNode(!1),this.appendChild=function(a){this.childNodes.push(a),sibling_update(this)},this.removeChild=function(a){for(var b=0;b<childNodes.length;b++)if(childNodes[b].id==a){this.childNodes.splice(b,1);break}sibling_update(this)},this.visibility=a.getAttribute("visibility"),this.stroke=a.getAttribute("stroke"),this.stroke_opacity=parseFloat(a.getAttribute("stroke-opacity")),this.stroke_width=parseFloat(a.getAttribute("stroke-width")),this.stroke_dasharray=a.getAttribute("stroke-dasharray"),this.stroke_linecap=a.getAttribute("stroke-linecap"),this.stroke_linejoin=a.getAttribute("stroke-linejoin"),this.x=parseFloat(a.getAttribute("x")),this.y=parseFloat(a.getAttribute("y")),this.width=parseFloat(a.getAttribute("width")),this.height=parseFloat(a.getAttribute("height")),this.style=a.getAttribute("style"),this.transform=a.getAttribute("transform"),this.transform){var b=this.transform.split("(");this.translate_x=parseFloat(Number(b[1].substring(0,b[1].indexOf(",")))),this.translate_y=parseFloat(Number(b[1].substring(b[1].indexOf(",")+1,b[1].indexOf(")")))),this.rotate=parseFloat(Number(b[2].substring(0,b[2].indexOf(")")))),this.scale_x=parseFloat(Number(b[3].substring(0,b[3].indexOf(",")))),this.scale_y=parseFloat(Number(b[3].substring(b[3].indexOf(",")+1,b[3].indexOf(")")))),this.center_x=parseFloat(Number(a.getAttribute("pg-xcenter"))),this.center_y=parseFloat(Number(a.getAttribute("pg-ycenter")))}else this.translate_x=0,this.translate_y=0,this.rotate=0,this.scale_x=1,this.scale_y=1,this.center_x=0,this.center_y=0;this.fill=a.getAttribute("fill"),this.fill_opacity=parseFloat(Number(a.getAttribute("fill-opacity"))),this.variable=a.getAttribute("variable"),this.series_max_size=parseFloat(Number(a.getAttribute("series-max-size"))),this.series_type=a.getAttribute("series-type"),this.symbol_type=a.getAttribute("symbol-type"),this.symbol_fill=a.getAttribute("symbol-fill"),this.symbol_fill_opacity=parseFloat(Number(a.getAttribute("symbol-fill-opacity"))),this.symbol_stroke=a.getAttribute("symbol-stroke"),this.symbol_stroke_opacity=parseFloat(Number(a.getAttribute("symbol-stroke-opacity"))),this.symbol_stroke_width=parseFloat(Number(a.getAttribute("symbol-stroke-width"))),this.symbol_stroke_dasharray=a.getAttribute("symbol-stroke-dasharray"),this.symbol_size=parseFloat(Number(a.getAttribute("symbol-size"))),this.data=a.getAttribute("data"),this.olddata="",this.series_data=[],this.mainscale_label=a.getAttribute("mainscale-label"),this.font_family=a.getAttribute("font-family"),this.font_format=a.getAttribute("font-format"),this.font_color=a.getAttribute("font-color"),this.font_size=parseFloat(Number(a.getAttribute("symbol-size"))),this.font_style=a.getAttribute("font-style"),this.series_scale=a.getAttribute("series-scale"),this.yaxis_max=parseFloat(Number(a.getAttribute("yaxis-max"))),this.yaxis_min=parseFloat(Number(a.getAttribute("yaxis-min")));for(var c=a.firstChild,d=0;d<a.childNodes.length&&("script"==c.nodeName&&("ie"==current_browser?CreateFunction(c.text,this):CreateFunction(c.textContent,this)),c.nextSibling);d++)c=c.nextSibling;CreateVariable(this.variable)}
function labelformat(a,b,c){var d;if("Invalid Date"==b.toString())return b.toString();if("on"==a.trend_flow&&(d=new Date(b)),"off"==a.trend_flow&&(d=new Date(1e3*b)),"SYS"==prev_time_mode)switch(c){case"number":return d.valueOf();case"yyyy-mm-dd":return d.getFullYear()+"-"+d.getMonth()+"-"+d.getDay();case"yyyy-mm":return d.getFullYear()+"-"+d.getMonth();case"yyyy":return d.getFullYear().toString();case"yy-mm-dd":return d.getFullYear().toString().substring(2,4)+"-"+d.getMonth()+"-"+d.getDay();case"yy-mm":return d.getFullYear().toString().substring(2,4)+"-"+d.getMonth();case"yy":return d.getFullYear().toString().substring(2,4);case"hh:mm:ss.ms":return d.getHours()+":"+d.getMinutes()+":"+d.getSeconds()+":"+d.getMilliseconds();case"hh:mm:ss":return d.getHours()+":"+d.getMinutes()+":"+d.getSeconds();case"yyyy-mm-dd hh:mm:ss.ms":return d.getFullYear()+"-"+d.getMonth()+"-"+d.getDay()+" "+d.getHours()+":"+d.getMinutes()+":"+d.getSeconds()+":"+d.getMilliseconds();case"yyyy-mm-dd hh:mm:ss":return d.getFullYear()+"-"+d.getMonth()+"-"+d.getDay()+" "+d.getHours()+":"+d.getMinutes()+":"+d.getSeconds();case"yy-mm-dd hh:mm:ss.ms":return d.getFullYear().toString().substring(2,4)+"-"+d.getMonth()+"-"+d.getDay()+" "+d.getHours()+":"+d.getMinutes()+":"+d.getSeconds()+":"+d.getMilliseconds();case"yy-mm-dd hh:mm:ss":return d.getFullYear().toString().substring(2,4)+"-"+d.getMonth()+"-"+d.getDay()+" "+d.getHours()+":"+d.getMinutes()+":"+d.getSeconds();default:return}else if("SIM"==prev_time_mode)switch(c){case"number":return d.valueOf();case"yyyy-mm-dd":return d.getFullYear()+"-"+d.getUTCMonth()+"-"+d.getUTCDay();case"yyyy-mm":return d.getFullYear()+"-"+d.getUTCMonth();case"yyyy":return d.getFullYear().toString();case"yy-mm-dd":return d.getFullYear().toString().substring(2,4)+"-"+d.getUTCMonth()+"-"+d.getUTCDay();case"yy-mm":return d.getFullYear().toString().substring(2,4)+"-"+d.getUTCMonth();case"yy":return d.getFullYear().toString().substring(2,4);case"hh:mm:ss.ms":return d.getUTCHours()+":"+d.getUTCMinutes()+":"+d.getUTCSeconds()+":"+d.getUTCMilliseconds();case"hh:mm:ss":return d.getUTCHours()+":"+d.getUTCMinutes()+":"+d.getUTCSeconds();case"yyyy-mm-dd hh:mm:ss.ms":return d.getFullYear()+"-"+d.getUTCMonth()+"-"+d.getUTCDay()+" "+d.getUTCHours()+":"+d.getUTCMinutes()+":"+d.getUTCSeconds()+":"+d.getUTCMilliseconds();case"yyyy-mm-dd hh:mm:ss":return d.getFullYear()+"-"+d.getUTCMonth()+"-"+d.getUTCDay()+" "+d.getUTCHours()+":"+d.getUTCMinutes()+":"+d.getUTCSeconds();case"yy-mm-dd hh:mm:ss.ms":return d.getFullYear().toString().substring(2,4)+"-"+d.getUTCMonth()+"-"+d.getUTCDay()+" "+d.getUTCHours()+":"+d.getUTCMinutes()+":"+d.getUTCSeconds()+":"+d.getUTCMilliseconds();case"yy-mm-dd hh:mm:ss":return d.getFullYear().toString().substring(2,4)+"-"+d.getUTCMonth()+"-"+d.getUTCDay()+" "+d.getUTCHours()+":"+d.getUTCMinutes()+":"+d.getUTCSeconds()}}function fontstyle(a,b){var c;void 0!=a.font_color||""!=a.font_color?b.fillStyle=a.font_color:b.fillStyle="rgb(0,0,0)";var d="";void 0!=a.font_style&&(d+=a.font_style+" "),void 0!=a.font_style&&("bold"!=a.font_weight&&"BOLD"!=a.font_weight||(c="bold",d+=c+" ")),void 0!=a.font_size?d+=a.font_size+"px ":d+="10px ",void 0!=a.font_family&&(d+=a.font_family),b.font=d}function DrawSymbol(a,b,c,d){var e;if(e=d?.3*d:a.symbol_size,"circle"==a.symbol_type){ctx.save();var f=(Math.sqrt(2)-1)/3*4;e/=2,ctx.beginPath(),ctx.moveTo(b,c-e),ctx.bezierCurveTo(b+f*e,c-e,b+e,c-f*e,b+e,c),ctx.bezierCurveTo(b+e,c+f*e,b+f*e,c+e,b,c+e),ctx.bezierCurveTo(b-f*e,c+e,b-e,c+f*e,b-e,c),ctx.bezierCurveTo(b-e,c-f*e,b-f*e,c-e,b,c-e),ctx.closePath(),ctx.fillStyle=a.symbol_fill,ctx.globalAlpha=a.fill_opacity,ctx.fill(),ctx.restore()}else if("triangle"==a.symbol_type){ctx.save();var g=Math.PI/6;ctx.beginPath(),ctx.moveTo(b+Math.cos(g)*e,c+e/2),ctx.lineTo(b-Math.cos(g)*e,c+e/2),ctx.lineTo(b,c-e),ctx.closePath(),ctx.fillStyle=a.symbol_fill,ctx.globalAlpha=a.fill_opacity,ctx.fill(),ctx.restore()}else"rect"==a.symbol_type?(ctx.save(),ctx.beginPath(),ctx.moveTo(b-e,c-e),ctx.lineTo(b+e,c-e),ctx.lineTo(b+e,c+e),ctx.lineTo(b-e,c+e),ctx.closePath(),ctx.fillStyle=a.symbol_fill,ctx.globalAlpha=a.fill_opacity,ctx.fill(),ctx.restore()):a.symbol_type}function DrawTrendObj(a,b,c){var d=!1,e=a.parentObj;if(d="g"==e.nodename||"use"==e.nodename,ctx.setMatrix(b),SetTransform(a),SetStyle(a),0==a.visibility)return ctx.getMatrix();var f=a.x,g=a.y,h=a.rx,i=a.ry,j=a.width,k=a.height;ctx.beginPath(),ctx.moveTo(f+h,g),ctx.lineTo(f+j-h,g),ctx.quadraticCurveTo(f+j,g,f+j,g+i),ctx.lineTo(f+j,g+k-i),ctx.quadraticCurveTo(f+j,g+k,f+j-h,g+k),ctx.lineTo(f+h,g+k),ctx.quadraticCurveTo(f,g+k,f,g+k-i),ctx.lineTo(f,g+i),ctx.quadraticCurveTo(f,g,f+h,g),ctx.closePath(),ctx.globalAlpha=a.fill_opacity,ctx.fill(),ctx.globalAlpha=a.stroke_opacity,ctx.stroke();var l=ctx.getCoords(a.x,a.y),m=ctx.getCoords(a.x+a.width,a.y+a.height);l.x-m.x<1&&l.x-m.x>-1&&(l.x=l.x-1,m.x=m.x+1),l.y-m.y<1&&l.y-m.y>-1&&(l.y=l.y-1,m.y=m.y+1);var n=new BoundingBox(l.x,l.y,m.x,m.y),o=[n,a];return d?c.push(o):BoundBoxs.push(o),ctx.getMatrix()}function DrawTrendtitleObj(a,b,c){var e=a.parentObj;if("g"==e.parentObj.nodename||"use"==e.parentObj.nodename,ctx.setMatrix(b),SetTransform(a),SetStyle(a),0==a.visibility)return ctx.getMatrix();var h,i,j,k,f=a.rx,g=a.ry;"start"==a.text_anchor?(h=a.x,i=a.y,j=a.width,k=a.height):"middle"==a.text_anchor?(h=a.x-a.width/2,i=a.y,j=a.width,k=a.height):"end"==a.text_anchor&&(h=a.x-a.width,i=a.y,j=a.width,k=a.height),ctx.beginPath(),ctx.moveTo(h+f,i),ctx.lineTo(h+j-f,i),ctx.quadraticCurveTo(h+j,i,h+j,i+g),ctx.lineTo(h+j,i+k-g),ctx.quadraticCurveTo(h+j,i+k,h+j-f,i+k),ctx.lineTo(h+f,i+k),ctx.quadraticCurveTo(h,i+k,h,i+k-g),ctx.lineTo(h,i+g),ctx.quadraticCurveTo(h,i,h+f,i),ctx.closePath(),ctx.globalAlpha=a.fill_opacity,ctx.fill(),ctx.globalAlpha=a.stroke_opacity,ctx.stroke();var l=ctx.getCoords(a.x,a.y),m=ctx.getCoords(a.x+a.width,a.y+a.height);l.x-m.x<1&&l.x-m.x>-1&&(l.x=l.x-1,m.x=m.x+1),l.y-m.y<1&&l.y-m.y>-1&&(l.y=l.y-1,m.y=m.y+1);new BoundingBox(l.x,l.y,m.x,m.y);fontstyle(a,canvas_2Ddraw);var p=parseFloat(a.x),q=parseFloat(a.y),r=parseFloat(a.dx),s=parseFloat(a.dy),u=(canvas_2Ddraw.measureText(a.title),p+r),v=q+s+a.text_height,w=0;return 0!=parseFloat(a.baseline_shift)&&(w=a.baseline_shift*(.01*parseFloat(a.baseline_shift)),v-=w),"middle"==a.text_anchor?canvas_2Ddraw.textAlign="center":canvas_2Ddraw.textAlign=a.text_anchor,canvas_2Ddraw.globalAlpha=1,canvas_2Ddraw.fillText(a.title,u,v),ctx.getMatrix()}function DrawTrendlegendObj(a,b,c){var e=a.parentObj;if("g"==e.parentObj.nodename||"use"==e.parentObj.nodename,ctx.setMatrix(b),SetTransform(a),SetStyle(a),0==a.visibility)return ctx.getMatrix();var f=a.rx,g=a.ry,h=a.x,i=a.y,j=a.width,k=a.height;ctx.beginPath(),ctx.moveTo(h+f,i),ctx.lineTo(h+j-f,i),ctx.quadraticCurveTo(h+j,i,h+j,i+g),ctx.lineTo(h+j,i+k-g),ctx.quadraticCurveTo(h+j,i+k,h+j-f,i+k),ctx.lineTo(h+f,i+k),ctx.quadraticCurveTo(h,i+k,h,i+k-g),ctx.lineTo(h,i+g),ctx.quadraticCurveTo(h,i,h+f,i),ctx.closePath(),ctx.globalAlpha=a.fill_opacity,ctx.fill(),ctx.globalAlpha=a.stroke_opacity,ctx.stroke();var t,u,v,l=a.parentObj.trendSeriesList,m=a.font_highest_height,n=a.font_highest_width,o=a.symbol_size,r=(a.x,a.y,a.x),s=a.y;if(v=o<m?m/2:o/2,"top"==a.position||"bottom"==a.position)for(var w=0,x=0,y=0;y<l.length;y++){r=a.x+a.gap.left+x*(n+a.gap.symbol_text+a.gap.series),s=a.y+a.gap.top+w*a.gap.row,t=r+(n+a.gap.symbol_text+a.gap.series),u=s+a.gap.row,t>a.parentObj.width?(x=0,w++):x++,ctx.beginPath(),ctx.moveTo(r,s+v),ctx.lineTo(r+o,s+v),ctx.strokeStyle=l[y].stroke,ctx.lineWidth=1.5,ctx.globalAlpha=l[y].stroke_opacity,ctx.stroke(),DrawSymbol(l[y],r+v,s+v,o);var z=r+o+a.gap.symbol_text,A=s+m;fontstyle(a,canvas_2Ddraw),canvas_2Ddraw.textAlign="start",canvas_2Ddraw.globalAlpha=1,canvas_2Ddraw.fillText(l[y].id,z,A)}else if("left"==a.position||"right"==a.position||"left top"==a.position||"right top"==a.position)for(var w=0,x=0,y=0;y<l.length;y++){r=a.x+a.gap.left+x*(n+a.gap.symbol_text+a.gap.series),s=a.y+a.gap.top+w*(a.gap.row+m),t=r+(n+a.gap.symbol_text+a.gap.series),u=s+a.gap.row,u>a.parentObj.height?(w=0,x++):w++,ctx.beginPath(),ctx.moveTo(r,s+v),ctx.lineTo(r+o,s+v),ctx.strokeStyle=l[y].stroke,ctx.lineWidth=1.5,ctx.globalAlpha=l[y].stroke_opacity,ctx.stroke(),DrawSymbol(l[y],r+v,s+v,o);var z=r+o+a.gap.symbol_text,A=s+m;fontstyle(a,canvas_2Ddraw),canvas_2Ddraw.textAlign="start",canvas_2Ddraw.globalAlpha=1,canvas_2Ddraw.fillText(l[y].id,z,A)}return ctx.getMatrix()}function DrawTrendxaxisObj(a,b,c){var e=a.parentObj;if("g"==e.parentObj.nodename||"use"==e.parentObj.nodename,ctx.setMatrix(b),SetTransform(a),SetStyle(a),0==a.visibility)return ctx.getMatrix();var j,k,l,f=a.parentObj,g=f.graph,h=1e3*f.duration;g.xaxis_count;for("on"==f.trend_flow?j=h/g.xaxis_count:"off"==f.trend_flow&&(j=(f.xview_max-f.xview_min)/g.xaxis_count),k=f.xview_min%j?f.xview_min+(j-f.xview_min%j):f.xview_min,l=k,a.xaxislist=[],l;l<=f.xview_max&&(l>=f.xview_min&&a.xaxislist.push(Number(l.toFixed(a.decimal_point))),!(a.xaxislist.length>g.xaxis_count+1));l+=j);if("hidden"!=f.xaxis_visible){var m=0,n=0,o=g.width,q=(g.height,a.xaxislist);if("top"==a.position)m=g.x,n=g.y;else{if("bottom"!=a.position)return;m=g.x,n=g.y+g.height}if(0==q.length)return void console.log("no xaxis data");var r;if(r="on"==f.trend_flow?g.width/h:g.width/(f.xview_max-f.xview_min),ctx.beginPath(),ctx.moveTo(m,n),ctx.lineTo(m+o,n),g.xaxis_count&&"on"==a.mainscale)if("top"==a.position)for(var s=0;s<g.xaxis_count;s++){var t=m+(q[s]-f.xview_min)*r;ctx.moveTo(t,n),ctx.lineTo(t,n-a.scale_length)}else{if("bottom"!=a.position)return void console.log("x축의 위치 값이 잘못 됨");for(var s=0;s<g.xaxis_count;s++){var t=m+(q[s]-f.xview_min)*r;ctx.moveTo(t,n),ctx.lineTo(t,n+a.scale_length)}}ctx.closePath(),ctx.globalAlpha=a.fill_opacity,ctx.fill(),ctx.globalAlpha=a.stroke_opacity,ctx.stroke(),fontstyle(a,canvas_2Ddraw);var u,v,w=0;if("top"==a.position?v=g.y-a.scale_length:"bottom"==a.position&&(v=g.y+g.height+a.scale_length+a.font_height),a.xaxislist.length)for(var s=0;s<a.xaxislist.length;s++){u=g.x+(q[s]-f.xview_min)*r,parseFloat(a.baseline_shift)&&(w=parseFloat(a.baseline_shift)*(.01*parseFloat(a.baseline_shift)),v-=w),canvas_2Ddraw.textAlign="center",canvas_2Ddraw.globalAlpha=1;var x=labelformat(f,q[s],a.label_format);canvas_2Ddraw.fillText(x,u,v)}}var y=ctx.getCoords(a.x,a.y),z=ctx.getCoords(a.x+a.width,a.y+a.height);y.x-z.x<1&&y.x-z.x>-1&&(y.x=y.x-1,z.x=z.x+1),y.y-z.y<1&&y.y-z.y>-1&&(y.y=y.y-1,z.y=z.y+1);new BoundingBox(y.x,y.y,z.x,z.y);return ctx.getMatrix()}function DrawTrendyaxisObj(a,b,c){var e=a.parentObj;if("g"==e.parentObj.nodename||"use"==e.parentObj.nodename,ctx.setMatrix(b),SetTransform(a),SetStyle(a),0==a.visibility)return ctx.getMatrix();var f=a.parentObj,g=f.graph,h=(f.yview_max-f.yview_min)/g.yaxis_count,i=f.yview_min;for(a.yaxislist=[],i;i<=f.yview_max&&(i>=f.yview_min&&a.yaxislist.push(i.toFixed(a.decimal_point)),!(a.yaxislist.length>g.yaxis_count+1));i+=h);if("hidden"!=f.yaxis_visible){var j=0,k=0,l=g.width,m=g.height,n=a.yaxislist;if("left"==a.position)j=g.x,k=g.y+m;else{if("right"!=a.position)return;j=g.x+l,k=g.y+m}if(0==n.length)return void console.log("no yaxis data");var o=m/(f.yview_max-f.yview_min);if(ctx.beginPath(),ctx.moveTo(j,k),ctx.lineTo(j,k-m),g.yaxis_count&&"on"==a.mainscale)if("left"==a.position)for(var p=0;p<g.yaxis_count;p++){var q=k-(n[p]-f.yview_min)*o;ctx.moveTo(j,q),ctx.lineTo(j-a.scale_length,q)}else{if("right"!=a.position)return void console.log("y축의 위치 값이 잘못 됨");for(var p=0;p<g.yaxis_count;p++){var q=k-(n[p]-f.yview_min)*o;ctx.moveTo(j+l,q),ctx.lineTo(j+l+a.scale_length,q)}}ctx.closePath(),ctx.globalAlpha=a.fill_opacity,ctx.fill(),ctx.globalAlpha=a.stroke_opacity,ctx.stroke(),fontstyle(a,canvas_2Ddraw);var r,s,t=0;if("left"==a.position?r=g.x-a.scale_length:"right"==a.position&&(r=g.x+a.scale_length),a.yaxislist.length)for(var p=0;p<a.yaxislist.length;p++)s=g.y+g.height+a.font_height/3-(n[p]-f.yview_min)*o,parseFloat(a.baseline_shift)&&(t=parseFloat(a.baseline_shift)*(.01*parseFloat(a.baseline_shift)),s-=t),"left"==a.position?canvas_2Ddraw.textAlign="end":"right"==a.position&&(canvas_2Ddraw.textAlign="start"),canvas_2Ddraw.globalAlpha=1,canvas_2Ddraw.fillText(n[p],r,s)}var u=ctx.getCoords(a.x,a.y),v=ctx.getCoords(a.x+a.width,a.y+a.height);u.x-v.x<1&&u.x-v.x>-1&&(u.x=u.x-1,v.x=v.x+1),u.y-v.y<1&&u.y-v.y>-1&&(u.y=u.y-1,v.y=v.y+1);new BoundingBox(u.x,u.y,v.x,v.y);return ctx.getMatrix()}function SetStyleGrid(a){ctx.strokeStyle=a.grid_stroke,"undefined"!=a.grid_stroke_width?ctx.lineWidth=a.grid_stroke_width:ctx.lineWidth=1;var b=ToNumberArray(a.grid_stroke_dasharray);if("NaN"!=String(b))void 0!==ctx.setLineDash&&ctx.setLineDash(b);else{var c=[];ctx.setLineDash(c)}}function DrawTrendgraphObj(a,b,c){var d=!1,e=a.parentObj,f=e;if(d="g"==e.parentObj.nodename||"use"==e.parentObj.nodename,ctx.setMatrix(b),SetTransform(a),0==a.visibility)return ctx.getMatrix();var k,g=a.x,h=a.y,i=a.width,j=a.height,l=a.height/(f.yview_max-f.yview_min);if(k="on"==f.trend_flow?a.width/(1e3*f.duration):a.width/(f.xview_max-f.xview_min),ctx.beginPath(),ctx.moveTo(g,h),ctx.lineTo(g+i,h),ctx.lineTo(g+i,h+j),ctx.lineTo(g,h+j),ctx.lineTo(g,h),ctx.closePath(),ctx.globalAlpha=a.fill_opacity,ctx.fill(),ctx.save(),ctx.beginPath(),ctx.rect(a.x,a.y,a.width,a.height),canvas_2Ddraw.clip(),SetStyleGrid(a),a.xaxis_count&&a.yaxis_count){if(f.xaxis.xaxislist)for(var m in f.xaxis.xaxislist)if(f.xaxis.xaxislist[m]>f.xview_min&&f.xaxis.xaxislist[m]<f.xview_max){var n=g+(f.xaxis.xaxislist[m]-f.xview_min)*k;ctx.moveTo(n,h),ctx.lineTo(n,h+j)}if(f.yaxis.yaxislist)for(var m in f.yaxis.yaxislist)if(f.yaxis.yaxislist[m]>f.yview_min&&f.yaxis.yaxislist[m]<f.yview_max){var o=h+j-(f.yaxis.yaxislist[m]-f.yview_min)*l;ctx.moveTo(g,o),ctx.lineTo(g+i,o)}}ctx.globalAlpha=a.grid_stroke_opacity,ctx.closePath(),ctx.stroke(),SetStyle(a),ctx.beginPath(),ctx.moveTo(g,h),ctx.lineTo(g+i,h),ctx.lineTo(g+i,h+j),ctx.lineTo(g,h+j),ctx.lineTo(g,h),ctx.closePath(),ctx.globalAlpha=a.stroke_opacity,ctx.stroke(),ctx.restore();var p=ctx.getCoords(a.x,a.y),q=ctx.getCoords(a.x+a.width,a.y+a.height);p.x-q.x<1&&p.x-q.x>-1&&(p.x=p.x-1,q.x=q.x+1),p.y-q.y<1&&p.y-q.y>-1&&(p.y=p.y-1,q.y=q.y+1);var r=new BoundingBox(p.x,p.y,q.x,q.y),s=[r,a];return d?c.push(s):BoundBoxs.push(s),ctx.getMatrix()}function DrawTrendseriesObj(a,b){var d=a.parentObj;if("g"==d.parentObj.nodename||"use"==d.parentObj.nodename,ctx.setMatrix(b),SetTransform(a),SetStyle(a),0==a.visibility)return ctx.getMatrix();var e=a.parentObj;if("off"==e.trend_flow&&a.olddata!=a.data){a.olddata=a.data,a.series_data=[];for(var f=0,g=0,h=0,i="",j=0;j<a.data.length;j++)if(","==a.data[j]&&0==f)g=parseFloat(Number(i)),i="",f++;else if(" "==a.data[j]&&""!=i&&1==f){h=parseFloat(Number(i));var k=new data_point(g,h);a.series_data.push(k),i="",f=0}else" "!=a.data[j]&&(i+=a.data[j]);h=parseFloat(Number(i));var k=new data_point(g,h);a.series_data.push(k)}var l=a.parentObj.graph,m=l.x,n=l.y,o=0,p=0,q=0,r=a.series_data,t=l.width/(e.xview_max-e.xview_min),u=l.height/(e.yview_max-e.yview_min),v=parseInt(r.length/a.series_max_size);if(0==v&&(v=1),r.length){for("left-right"==e.direction?m=l.x:"right-left"==e.direction&&(m=l.x+l.width),"down-top"==e.direction_y?n=l.y+l.height:"top-down"==e.direction_y&&(n=l.y),void 0==e.direction_y&&void 0==e.direction&&(m=l.x,n=l.y+l.height),r[0],q;q<r.length&&!(r[q].x>=e.xview_min);q+=v);if(q>=1&&q-v>=0&&(q-=v),ctx.save(),ctx.beginPath(),ctx.rect(l.x,l.y,l.width,l.height),canvas_2Ddraw.clip(),"line"==a.series_type){var w=[];ctx.beginPath();for(var j=q;j<r.length&&("right-left"==e.direction?o=m-(r[j].x-e.xview_min)*t:"left-right"==e.direction&&(o=m+(r[j].x-e.xview_min)*t),"down-top"==e.direction_y?p=n-(r[j].y-e.yview_min)*u:"top-down"==e.direction_y&&(p=n+(r[j].y-e.yview_min)*u),0==j&&ctx.moveTo(o,p),ctx.lineTo(o,p),w.push(new data_point(o,p)),!(e.xview_max<r[j].x));j+=v);if(ctx.globalAlpha=a.stroke_opacity,ctx.stroke(),"none"!=a.symbol_type)for(var j=0;j<w.length;j++)DrawSymbol(a,w[j].x,w[j].y)}else if("scatter"==a.series_type)for(var j=q;j<r.length&&("right-left"==e.direction?o=m-(r[j].x-e.xview_min)*t:"left-right"==e.direction&&(o=m+(r[j].x-e.xview_min)*t),"down-top"==e.direction_y?p=n-(r[j].y-e.yview_min)*u:"top-down"==e.direction_y&&(p=n+(r[j].y-e.yview_min)*u),DrawSymbol(a,o,p),!(e.xview_max<r[j].x));j+=v);ctx.restore()}var x=ctx.getCoords(a.x,a.y),y=ctx.getCoords(a.x+a.width,a.y+a.height);return x.x-y.x<1&&x.x-y.x>-1&&(x.x=x.x-1,y.x=y.x+1),x.y-y.y<1&&x.y-y.y>-1&&(x.y=x.y-1,y.y=y.y+1),ctx.getMatrix()}